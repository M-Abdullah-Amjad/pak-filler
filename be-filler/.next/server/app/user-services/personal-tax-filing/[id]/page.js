(()=>{var e={};e.id=4516,e.ids=[4516],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},14719:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},17313:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},19043:(e,t,s)=>{Promise.resolve().then(s.bind(s,82359))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23928:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32192:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},33873:e=>{"use strict";e.exports=require("path")},35071:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},39390:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var a=s(60687),n=s(43210),r=s(78148),i=s(24224),l=s(96241);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.b,{ref:s,className:(0,l.cn)(c(),e),...t}));o.displayName=r.b.displayName},41312:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},41862:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},47033:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},53723:(e,t,s)=>{"use strict";s.d(t,{S:()=>T});var a=s(60687),n=s(43210),r=s(98599),i=s(11273),l=s(70569),c=s(65551),o=s(83721),d=s(18853),h=s(46059),m=s(14163),u="Checkbox",[x,p]=(0,i.A)(u),[f,g]=x(u);function b(e){let{__scopeCheckbox:t,checked:s,children:r,defaultChecked:i,disabled:l,form:o,name:d,onCheckedChange:h,required:m,value:x="on",internal_do_not_use_render:p}=e,[g,b]=(0,c.i)({prop:s,defaultProp:i??!1,onChange:h,caller:u}),[y,j]=n.useState(null),[v,N]=n.useState(null),w=n.useRef(!1),k=!y||!!o||!!y.closest("form"),A={checked:g,disabled:l,setChecked:b,control:y,setControl:j,name:d,form:o,value:x,hasConsumerStoppedPropagationRef:w,required:m,defaultChecked:!C(i)&&i,isFormControl:k,bubbleInput:v,setBubbleInput:N};return(0,a.jsx)(f,{scope:t,...A,children:"function"==typeof p?p(A):r})}var y="CheckboxTrigger",j=n.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...i},c)=>{let{control:o,value:d,disabled:h,checked:u,required:x,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:b,isFormControl:j,bubbleInput:v}=g(y,e),N=(0,r.s)(c,p),w=n.useRef(u);return n.useEffect(()=>{let e=o?.form;if(e){let t=()=>f(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,f]),(0,a.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":C(u)?"mixed":u,"aria-required":x,"data-state":S(u),"data-disabled":h?"":void 0,disabled:h,value:d,...i,ref:N,onKeyDown:(0,l.m)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.m)(s,e=>{f(e=>!!C(e)||!e),v&&j&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});j.displayName=y;var v=n.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:n,checked:r,defaultChecked:i,required:l,disabled:c,value:o,onCheckedChange:d,form:h,...m}=e;return(0,a.jsx)(b,{__scopeCheckbox:s,checked:r,defaultChecked:i,disabled:c,required:l,onCheckedChange:d,name:n,form:h,value:o,internal_do_not_use_render:({isFormControl:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{...m,ref:t,__scopeCheckbox:s}),e&&(0,a.jsx)(A,{__scopeCheckbox:s})]})})});v.displayName=u;var N="CheckboxIndicator",w=n.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:n,...r}=e,i=g(N,s);return(0,a.jsx)(h.C,{present:n||C(i.checked)||!0===i.checked,children:(0,a.jsx)(m.sG.span,{"data-state":S(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})});w.displayName=N;var k="CheckboxBubbleInput",A=n.forwardRef(({__scopeCheckbox:e,...t},s)=>{let{control:i,hasConsumerStoppedPropagationRef:l,checked:c,defaultChecked:h,required:u,disabled:x,name:p,value:f,form:b,bubbleInput:y,setBubbleInput:j}=g(k,e),v=(0,r.s)(s,j),N=(0,o.Z)(c),w=(0,d.X)(i);n.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!l.current;if(N!==c&&e){let s=new Event("click",{bubbles:t});y.indeterminate=C(c),e.call(y,!C(c)&&c),y.dispatchEvent(s)}},[y,N,c,l]);let A=n.useRef(!C(c)&&c);return(0,a.jsx)(m.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??A.current,required:u,disabled:x,name:p,value:f,form:b,...t,tabIndex:-1,ref:v,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function S(e){return C(e)?"indeterminate":e?"checked":"unchecked"}A.displayName=k;var P=s(13964),I=s(96241);let T=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(v,{ref:s,className:(0,I.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,a.jsx)(w,{className:(0,I.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})}));T.displayName=v.displayName},55192:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>l,wL:()=>h});var a=s(60687),n=s(43210),r=s(96241);let i=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let c=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let o=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let h=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t}));h.displayName="CardFooter"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57800:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},58869:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},59402:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},59821:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(60687),n=s(24224),r=s(96241);let i=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return(0,a.jsx)("div",{className:(0,r.cn)(i({variant:t}),e),...s})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(e,t,s)=>{"use strict";s.d(t,{bq:()=>m,eb:()=>f,gC:()=>p,l6:()=>d,yv:()=>h});var a=s(60687),n=s(43210),r=s(72951),i=s(78272),l=s(3589),c=s(13964),o=s(96241);let d=r.bL;r.YJ;let h=r.WT,m=n.forwardRef(({className:e,children:t,...s},n)=>(0,a.jsxs)(r.l9,{ref:n,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=r.l9.displayName;let u=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.PP,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})}));u.displayName=r.PP.displayName;let x=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.wn,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}));x.displayName=r.wn.displayName;let p=n.forwardRef(({className:e,children:t,position:s="popper",...n},i)=>(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{ref:i,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[(0,a.jsx)(u,{}),(0,a.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(x,{})]})}));p.displayName=r.UC.displayName,n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.JU,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=r.JU.displayName;let f=n.forwardRef(({className:e,children:t,...s},n)=>(0,a.jsxs)(r.q7,{ref:n,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})}),(0,a.jsx)(r.p4,{children:t})]}));f.displayName=r.q7.displayName,n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=r.wv.displayName},66147:(e,t,s)=>{"use strict";s.d(t,{SP:()=>l});var a=s(51060);let n=new(s(14220)).A,r=()=>n.getToken(),i=e=>(("Request failed with status code 403"===e.message||e.response?.data==="Invalid Token")&&(n.clearToken(),window.location.href="/auth/login"),e.response&&(401===e.response.status||"Unauthorized"===e.response.statusText)&&n.clearToken(),console.error("An error occurred:",e),Promise.reject(e)),l=a.A.create({headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=r();return e.headers=e.headers||{},t?e.headers.Authorization=`Bearer ${t}`:delete e.headers.Authorization,e},e=>i(e)),l.interceptors.response.use(e=>e,e=>i(e))},68988:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(60687),n=s(43210),r=s(96241);let i=n.forwardRef(({className:e,type:t,...s},n)=>(0,a.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));i.displayName="Input"},73024:e=>{"use strict";e.exports=require("node:fs")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82359:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"F:\\\\Office Data\\\\My Made Projects\\\\7- PakFiler\\\\Pak-Filler\\\\be-filler\\\\app\\\\user-services\\\\personal-tax-filing\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Office Data\\My Made Projects\\7- PakFiler\\Pak-Filler\\be-filler\\app\\user-services\\personal-tax-filing\\[id]\\page.tsx","default")},84699:(e,t,s)=>{Promise.resolve().then(s.bind(s,88507))},86561:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},88507:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eQ});var a=s(60687),n=s(76180),r=s.n(n),i=s(43210),l=s(16189),c=s(55192),o=s(24934),d=s(14719),h=s(47033),m=s(14952),u=s(63974);function x({formData:e,handleInputChange:t}){let s=(0,l.useParams)();s?.id&&String(s.id);let[n,r]=(0,i.useState)(!1),c=e.taxYear?String(e.taxYear):"";return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Select Tax Year"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)(u.l6,{onValueChange:e=>t("taxYear",e),value:c,children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select tax year"})}),(0,a.jsx)(u.gC,{className:"absolute z-50 bg-white",children:Array.from({length:5},(e,t)=>{let s=new Date().getFullYear()-t;return(0,a.jsx)(u.eb,{value:s.toString(),children:s},s)})})]})})]})}var p=s(68988),f=s(39390),g=s(53723);let b={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function y(e){return (t={})=>{let s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}let j={date:y({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:y({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:y({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},v={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function N(e){return(t,s)=>{let a;if("formatting"===(s?.context?String(s.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,n=s?.width?String(s.width):t;a=e.formattingValues[n]||e.formattingValues[t]}else{let t=e.defaultWidth,n=s?.width?String(s.width):e.defaultWidth;a=e.values[n]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function w(e){return(t,s={})=>{let a;let n=s.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;let l=i[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(c)?function(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}(c,e=>e.test(l)):function(e,t){for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}(c,e=>e.test(l));return a=e.valueCallback?e.valueCallback(o):o,{value:a=s.valueCallback?s.valueCallback(a):a,rest:t.slice(l.length)}}}let k={code:"en-US",formatDistance:(e,t,s)=>{let a;let n=b[e];return(a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),s?.addSuffix)?s.comparison&&s.comparison>0?"in "+a:a+" ago":a},formatLong:j,formatRelative:(e,t,s,a)=>v[e],localize:{ordinalNumber:(e,t)=>{let s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},era:N({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:N({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:N({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:N({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:N({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return(t,s={})=>{let a=t.match(e.matchPattern);if(!a)return null;let n=a[0],r=t.match(e.parsePattern);if(!r)return null;let i=e.valueCallback?e.valueCallback(r[0]):r[0];return{value:i=s.valueCallback?s.valueCallback(i):i,rest:t.slice(n.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:w({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:w({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:w({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:w({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},A={},C=Symbol.for("constructDateFrom");function S(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&C in e?e[C](t):e instanceof Date?new e.constructor(t):new Date(t)}function P(e,t){return S(t||e,e)}function I(e){let t=P(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function T(e,t){let s=P(e,t?.in);return s.setHours(0,0,0,0),s}function E(e,t){let s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??A.weekStartsOn??A.locale?.options?.weekStartsOn??0,a=P(e,t?.in),n=a.getDay();return a.setDate(a.getDate()-(7*(n<s)+n-s)),a.setHours(0,0,0,0),a}function D(e,t){return E(e,{...t,weekStartsOn:1})}function F(e,t){let s=P(e,t?.in),a=s.getFullYear(),n=S(s,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);let r=D(n),i=S(s,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);let l=D(i);return s.getTime()>=r.getTime()?a+1:s.getTime()>=l.getTime()?a:a-1}function B(e,t){let s=P(e,t?.in),a=s.getFullYear(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??A.firstWeekContainsDate??A.locale?.options?.firstWeekContainsDate??1,r=S(t?.in||e,0);r.setFullYear(a+1,0,n),r.setHours(0,0,0,0);let i=E(r,t),l=S(t?.in||e,0);l.setFullYear(a,0,n),l.setHours(0,0,0,0);let c=E(l,t);return+s>=+i?a+1:+s>=+c?a:a-1}function M(e,t){let s=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+s}let R={y(e,t){let s=e.getFullYear(),a=s>0?s:1-s;return M("yy"===t?a%100:a,t.length)},M(e,t){let s=e.getMonth();return"M"===t?String(s+1):M(s+1,2)},d:(e,t)=>M(e.getDate(),t.length),a(e,t){let s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:(e,t)=>M(e.getHours()%12||12,t.length),H:(e,t)=>M(e.getHours(),t.length),m:(e,t)=>M(e.getMinutes(),t.length),s:(e,t)=>M(e.getSeconds(),t.length),S(e,t){let s=t.length;return M(Math.trunc(e.getMilliseconds()*Math.pow(10,s-3)),t.length)}},O={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},L={G:function(e,t,s){let a=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});default:return s.era(a,{width:"wide"})}},y:function(e,t,s){if("yo"===t){let t=e.getFullYear();return s.ordinalNumber(t>0?t:1-t,{unit:"year"})}return R.y(e,t)},Y:function(e,t,s,a){let n=B(e,a),r=n>0?n:1-n;return"YY"===t?M(r%100,2):"Yo"===t?s.ordinalNumber(r,{unit:"year"}):M(r,t.length)},R:function(e,t){return M(F(e),t.length)},u:function(e,t){return M(e.getFullYear(),t.length)},Q:function(e,t,s){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return M(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,s){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return M(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,s){let a=e.getMonth();switch(t){case"M":case"MM":return R.M(e,t);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,s){let a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return M(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,s,a){let n=function(e,t){let s=P(e,t?.in);return Math.round((+E(s,t)-+function(e,t){let s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??A.firstWeekContainsDate??A.locale?.options?.firstWeekContainsDate??1,a=B(e,t),n=S(t?.in||e,0);return n.setFullYear(a,0,s),n.setHours(0,0,0,0),E(n,t)}(s,t))/6048e5)+1}(e,a);return"wo"===t?s.ordinalNumber(n,{unit:"week"}):M(n,t.length)},I:function(e,t,s){let a=function(e,t){let s=P(e,void 0);return Math.round((+D(s)-+function(e,t){let s=F(e,void 0),a=S((void 0)||e,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),D(a)}(s))/6048e5)+1}(e);return"Io"===t?s.ordinalNumber(a,{unit:"week"}):M(a,t.length)},d:function(e,t,s){return"do"===t?s.ordinalNumber(e.getDate(),{unit:"date"}):R.d(e,t)},D:function(e,t,s){let a=function(e,t){let s=P(e,void 0);return function(e,t,s){let[a,n]=function(e,...t){let s=S.bind(null,e||t.find(e=>"object"==typeof e));return t.map(s)}(void 0,e,t),r=T(a),i=T(n);return Math.round((+r-I(r)-(+i-I(i)))/864e5)}(s,function(e,t){let s=P(e,void 0);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}(s))+1}(e);return"Do"===t?s.ordinalNumber(a,{unit:"dayOfYear"}):M(a,t.length)},E:function(e,t,s){let a=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,s,a){let n=e.getDay(),r=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return M(r,2);case"eo":return s.ordinalNumber(r,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,s,a){let n=e.getDay(),r=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return M(r,t.length);case"co":return s.ordinalNumber(r,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,s){let a=e.getDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return M(n,t.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,s){let a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,s){let a;let n=e.getHours();switch(a=12===n?O.noon:0===n?O.midnight:n/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,s){let a;let n=e.getHours();switch(a=n>=17?O.evening:n>=12?O.afternoon:n>=4?O.morning:O.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,s){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),s.ordinalNumber(t,{unit:"hour"})}return R.h(e,t)},H:function(e,t,s){return"Ho"===t?s.ordinalNumber(e.getHours(),{unit:"hour"}):R.H(e,t)},K:function(e,t,s){let a=e.getHours()%12;return"Ko"===t?s.ordinalNumber(a,{unit:"hour"}):M(a,t.length)},k:function(e,t,s){let a=e.getHours();return(0===a&&(a=24),"ko"===t)?s.ordinalNumber(a,{unit:"hour"}):M(a,t.length)},m:function(e,t,s){return"mo"===t?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):R.m(e,t)},s:function(e,t,s){return"so"===t?s.ordinalNumber(e.getSeconds(),{unit:"second"}):R.s(e,t)},S:function(e,t){return R.S(e,t)},X:function(e,t,s){let a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return W(a);case"XXXX":case"XX":return q(a);default:return q(a,":")}},x:function(e,t,s){let a=e.getTimezoneOffset();switch(t){case"x":return W(a);case"xxxx":case"xx":return q(a);default:return q(a,":")}},O:function(e,t,s){let a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+$(a,":");default:return"GMT"+q(a,":")}},z:function(e,t,s){let a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+$(a,":");default:return"GMT"+q(a,":")}},t:function(e,t,s){return M(Math.trunc(+e/1e3),t.length)},T:function(e,t,s){return M(+e,t.length)}};function $(e,t=""){let s=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),r=a%60;return 0===r?s+String(n):s+String(n)+t+M(r,2)}function W(e,t){return e%60==0?(e>0?"-":"+")+M(Math.abs(e)/60,2):q(e,t)}function q(e,t=""){let s=Math.abs(e);return(e>0?"-":"+")+M(Math.trunc(s/60),2)+t+M(s%60,2)}let Y=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},z=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},J={p:z,P:(e,t)=>{let s;let a=e.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return Y(e,t);switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",Y(n,t)).replace("{{time}}",z(r,t))}},V=/^D+$/,H=/^Y+$/,K=["D","DD","YY","YYYY"],G=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,U=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_=/^'([^]*?)'?$/,Z=/''/g,X=/[a-zA-Z]/;var Q=s(62688);let ee=(0,Q.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var et=s(51060),es=s(70333);function ea({formData:e,handleInputChange:t,onNavigateNext:s}){let[n,r]=(0,i.useState)(""),c=(0,l.useParams)();c?.id;let[o,d]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),{toast:x}=(0,es.dj)(),b=e=>{let t=e.replace(/\D/g,""),s="";return t.length>0&&(s=t.slice(0,5)),t.length>5&&(s+="-"+t.slice(5,12)),t.length>12&&(s+="-"+t.slice(12,13)),s};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Personal Information"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"fullName",children:"Full Name"}),(0,a.jsx)(p.p,{id:"fullName",value:e.fullName||"",onChange:e=>t("fullName",e.target.value),placeholder:"Enter your full name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(p.p,{id:"email",type:"email",value:e.email||"",onChange:e=>t("email",e.target.value),placeholder:"Enter your email"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"cnic",children:"CNIC Number"}),(0,a.jsx)(p.p,{id:"cnic",value:e.cnic||"",onChange:e=>{let s=b(e.target.value);t("cnic",s),s&&!/^\d{5}-\d{7}-\d{1}$/.test(s)?r("CNIC must be in the format xxxxx-xxxxxxx-x (13 digits)"):r("")},placeholder:"xxxxx-xxxxxxx-x",maxLength:15}),n&&(0,a.jsx)("p",{className:"text-sm text-green-500",children:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"dateOfBirth",children:"Date of Birth"}),(0,a.jsx)(p.p,{id:"dateOfBirth",type:"date",value:e.dateOfBirth?function(e,t,s){let a=(void 0)??A.locale??k,n=(void 0)??s?.locale?.options?.firstWeekContainsDate??A.firstWeekContainsDate??A.locale?.options?.firstWeekContainsDate??1,r=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??A.weekStartsOn??A.locale?.options?.weekStartsOn??0,i=P(e,s?.in);if(!(i instanceof Date||"object"==typeof i&&"[object Date]"===Object.prototype.toString.call(i))&&"number"!=typeof i||isNaN(+P(i)))throw RangeError("Invalid time value");let l=t.match(U).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,J[t])(e,a.formatLong):e}).join("").match(G).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t)return{isToken:!1,value:function(e){let t=e.match(_);return t?t[1].replace(Z,"'"):e}(e)};if(L[t])return{isToken:!0,value:e};if(t.match(X))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});a.localize.preprocessor&&(l=a.localize.preprocessor(i,l));let c={firstWeekContainsDate:n,weekStartsOn:r,locale:a};return l.map(n=>{if(!n.isToken)return n.value;let r=n.value;return(!s?.useAdditionalWeekYearTokens&&H.test(r)||!s?.useAdditionalDayOfYearTokens&&V.test(r))&&!function(e,t,s){let a=function(e,t,s){let a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,s);if(console.warn(a),K.includes(e))throw RangeError(a)}(r,t,String(e)),(0,L[r[0]])(i,r,a.localize,c)}).join("")}(e.dateOfBirth,"yyyy-MM-dd"):"",onChange:e=>t("dateOfBirth",e.target.value?new Date(e.target.value):null)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"nationality",children:"Nationality"}),(0,a.jsxs)(u.l6,{onValueChange:e=>t("nationality",e),value:e.nationality||"",children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select nationality"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"Pakistan",children:"Pakistan"}),(0,a.jsx)(u.eb,{value:"Foreign",children:"Foreign"})]})]})]}),"Foreign"===e.nationality&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"passportNumber",children:"Passport Number"}),(0,a.jsx)(p.p,{id:"passportNumber",value:e.passportNumber||"",onChange:e=>t("passportNumber",e.target.value),placeholder:"Enter your passport number"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"residentialStatus",children:"Residential Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(u.l6,{onValueChange:e=>t("residentialStatus",e),value:e.residentialStatus||"",children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select residential status"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"Resident",children:"Resident"}),(0,a.jsx)(u.eb,{value:"Non-Resident",children:"Non-Resident"})]})]}),(0,a.jsx)("button",{type:"button",className:"ml-2 p-1 rounded-full bg-gray-200 hover:bg-gray-300",onClick:()=>m(!0),"aria-label":"Help about Resident status",children:(0,a.jsx)(ee,{className:"h-4 w-4 text-gray-700"})})]})]}),h&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex justify-end bg-black/30",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-md h-full shadow-lg p-6 overflow-y-auto relative",children:[(0,a.jsx)("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl",onClick:()=>m(!1),"aria-label":"Close help panel",children:"\xd7"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Resident"}),(0,a.jsx)("p",{className:"mb-2 text-gray-700",children:"You are resident for tax purposes if:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside text-gray-700 space-y-2 mb-4",children:[(0,a.jsx)("li",{children:"(a) Your stay in Pakistan during July 1, 2020 to June 30, 2021 (Tax Year 2021) was more than 183 days."}),(0,a.jsx)("li",{children:"(b) Your stay in Pakistan was equal to or more than 120 days during Tax Year 2021, and 365 days or more in the four preceding tax years."})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"You can update your information for this year."})]})}),"Other"===(e.nationality||"")&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.S,{id:"stayMoreThan3Years",checked:e.stayMoreThan3Years??!1,onCheckedChange:e=>t("stayMoreThan3Years",e)}),(0,a.jsx)(f.J,{htmlFor:"stayMoreThan3Years",children:"Stay in Pakistan more than 3 years"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.S,{id:"employmentBasedStay",checked:e.employmentBasedStay??!1,onCheckedChange:e=>t("employmentBasedStay",e)}),(0,a.jsx)(f.J,{htmlFor:"employmentBasedStay",children:"Stay in Pakistan based on employment"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"occupation",children:"Occupation"}),(0,a.jsxs)(u.l6,{onValueChange:e=>t("occupation",e),value:e.occupation||"",children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select occupation"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"Corporate Sector",children:"Corporate Sector"}),(0,a.jsx)(u.eb,{value:"Federal Govt.",children:"Federal Govt."}),(0,a.jsx)(u.eb,{value:"Provincial Govt.",children:"Provincial Govt."}),(0,a.jsx)(u.eb,{value:"Researcher / Teacher",children:"Researcher / Teacher"}),(0,a.jsx)(u.eb,{value:"Other",children:"Other"})]})]})]})]})}var en=s(93508),er=s(57800),ei=s(58869);let el=(0,Q.A)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var ec=s(86561);let eo=(0,Q.A)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),ed=(0,Q.A)("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);var eh=s(41312),em=s(32192),eu=s(17313);let ex=(0,Q.A)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);var ep=s(23928),ef=s(10022),eg=s(15659);function eb({formData:e,handleInputChange:t,onNavigateNext:s}){let[n,r]=(0,i.useState)(!1),{toast:l}=(0,es.dj)(),c=(eg.A.get("user")&&JSON.parse(eg.A.get("user")),[{id:"salary",label:"Salary Income",description:"Income from employment",icon:en.A},{id:"business",label:"Business/Self Employed",description:"Income from business activities",icon:er.A},{id:"freelancer",label:"Freelancer",description:"Income from freelance work",icon:ei.A},{id:"professional",label:"Professional Services",description:"Income from professional practice",icon:el},{id:"pension",label:"Pension",description:"Retirement pension income",icon:ec.A},{id:"agriculture",label:"Agriculture",description:"Income from agricultural activities",icon:eo},{id:"commission",label:"Commission/Service",description:"Commission or service-based income",icon:ed},{id:"partnership",label:"Partnership/AOP",description:"Income from partnership or association of persons",icon:eh.A},{id:"rent",label:"Rent",description:"Income from rental properties",icon:em.A},{id:"propertySale",label:"Property Sale",description:"Income from property transactions",icon:eu.A},{id:"savings",label:"Profit on Savings",description:"Interest or profit from savings/investments",icon:ex},{id:"dividendGain",label:"Dividend/Capital Gain",description:"Dividends and capital gains",icon:ep.A},{id:"other",label:"Other Income",description:"Any other source of income",icon:ef.A}]),o=e.incomeSources||[];return n?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Saving Income Sources..."}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please wait while we save your income sources."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Income Sources"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select all applicable income sources for the tax year"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:c.map(e=>(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center border rounded-lg p-6 bg-white hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,a.jsx)("span",{className:"mb-2",children:(0,a.jsx)(e.icon,{className:"h-12 w-12 text-[#15803d]"})}),(0,a.jsx)("span",{className:"font-semibold text-base text-center mb-1",children:e.label}),(0,a.jsx)("span",{className:"text-xs text-gray-500 text-center",children:e.description}),(0,a.jsx)(g.S,{id:e.id,checked:o.includes(e.id),onCheckedChange:s=>{let a=[...o];s?a.push(e.id):a=a.filter(t=>t!==e.id),t("incomeSources",a),t("incomes",a)},className:"mt-2"})]},e.id))}),o.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Selected sources:"})," ",o.length," income source(s) selected. You'll provide detailed information for each source in the next step."]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:["Selected: ",c.filter(e=>o.includes(e.id)).map(e=>e.label).join(", ")]})]})]})}let ey=(0,Q.A)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),ej=(0,Q.A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),ev=(0,Q.A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),eN=(0,Q.A)("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),ew=(0,Q.A)("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);var ek=s(96474);let eA=(0,Q.A)("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);var eC=s(59402);let eS=(0,Q.A)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),eP=(0,Q.A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);var eI=s(59821);function eT({formData:e,handleInputChange:t}){let[s,n]=(0,i.useState)(0),r=(0,l.useParams)();r?.id;let[u,x]=(0,i.useState)({}),[g,b]=(0,i.useState)({}),[y,j]=(0,i.useState)([]),v=[{key:"trader",label:"Trader/Shop",icon:ey},{key:"dealer",label:"Dealers",icon:ei.A},{key:"wholesaler",label:"Wholesalers/Supplier",icon:ej},{key:"manufacturer",label:"Manufacturers",icon:ev},{key:"importer",label:"Imports",icon:eN},{key:"exporter",label:"Exports",icon:ew}],[N,w]=(0,i.useState)([]),[k,A]=(0,i.useState)(null),C=e=>{if(!e)return"";let t=("number"==typeof e?e.toString():e).replace(/[^\d]/g,"");return t?Number.parseInt(t).toLocaleString():""},S=(e,t)=>t.replace(/[^\d]/g,""),P=async(e,t)=>{try{let s;x(t=>({...t,[e]:!0}));let a={userId:"64fd06ddc7a225c86e8f2345",taxYear:"2024-2025",...t},n="",r={};switch(e){case"salary":n="http://localhost:5000/api/income/salary-income",r={...a,annualSalary:Number.parseInt(t.annualSalary||"0"),taxDeducted:Number.parseInt(t.taxDeducted||"0"),taDaReceived:t.taDa||!1,medicalProvided:t.medicalTreatment||!1,providentFund:t.providentFund||!1,vehicleProvided:t.vehicleProvided||!1,vehicleAfterJune2020:t.receivedVehicleAfterJune2020||!1,vehicleCost:Number.parseInt(t.vehicleCostAmount||"0"),otherAllowances:t.otherAllowances||!1,gratuityFundWithdrawal:t.recognizedFundWithdrawal||!1,taxBorneByEmployer:t.taxBorneByEmployer||!1};break;case"business":n="http://localhost:5000/api/income/business-income",r={...a,businessTypes:N.map(e=>{let t=v.find(t=>t.key===e);return t?t.label:e})};break;case"professional":y.length>0&&(n="http://localhost:5000/api/income/professional-services-income",r={...a,professionType:y[0],amount:Number.parseInt(t.professionalIncome||"0"),expenses:Number.parseInt(t.professionalExpenses||"0"),taxPaid:Number.parseInt(t.professionalTaxPaid||"0")});break;case"freelancer":n="http://localhost:5000/api/income/freelancer-income",r={...a,totalEarnings:Number.parseInt(t.freelanceRevenue||"0"),expenses:Number.parseInt(t.freelanceDirectExpense||"0"),netIncome:Number.parseInt(t.freelanceRevenue||"0")-Number.parseInt(t.freelanceDirectExpense||"0"),taxPaid:Number.parseInt(t.freelanceTaxDeducted||"0"),fromAbroad:k||!1};break;case"partnership":t.partnershipEntries&&Array.isArray(t.partnershipEntries)&&t.partnershipEntries.length>0&&(n="http://localhost:5000/api/income/partnership-income",r={...a,partnerships:t.partnershipEntries.map(e=>({name:e?.name||"",annualIncome:Number.parseInt(e?.income||"0"),sharePercentage:Number.parseInt(e?.share||"0")}))});break;case"commission":n="http://localhost:5000/api/income/commission-service-income",r={...a,lifeInsuranceAgent:Number.parseInt(t.lifeInsuranceAmount||"0"),generalInsuranceAgent:Number.parseInt(t.generalInsuranceAmount||"0"),realEstateAgent:Number.parseInt(t.realEstateTravelAmount||"0"),servicesConsultancy:Number.parseInt(t.servicesConsultancyAmount||"0"),otherCommissions:Number.parseInt(t.otherCommissionsAmount||"0")};break;case"agriculture":n="http://localhost:5000/api/income/agriculture-income",r={...a,annualIncome:Number.parseInt(t.agricultureIncome||"0")};break;case"property":t.propertySaleEntries&&Array.isArray(t.propertySaleEntries)&&t.propertySaleEntries.length>0&&(n="http://localhost:5000/api/income/property-sale-income",r={...a,propertySales:t.propertySaleEntries.map(e=>({location:e?.address||"",saleAmount:Number.parseInt(e?.salePrice||"0"),purchaseAmount:Number.parseInt(e?.purchasePrice||"0"),gain:e?.gain||0,taxPaid:0}))});break;case"savings":n="http://localhost:5000/api/income/profit-on-savings",r={...a,bankDeposit:Number.parseInt(t.bankDepositProfit||"0"),govtScheme:Number.parseInt(t.govtSchemeProfit||"0"),behbood:Number.parseInt(t.behboodProfit||"0"),pensionerBenefit:Number.parseInt(t.pensionerBenefitProfit||"0")};break;case"dividend":case"dividendGain":n="http://localhost:5000/api/income/dividend-income",r={...a,dividend:Number.parseInt(t.dividendPowerAmount||"0")+Number.parseInt(t.dividendOtherAmount||"0")+Number.parseInt(t.dividendNoTaxAmount||"0"),capitalGain:Number.parseInt(t.capitalGainNet||"0"),bonus:Number.parseInt(t.bonusShareValue||"0")};break;default:console.log(`No API integration for ${e}`);return}if(n&&(s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}))){let t=await s.json();s.ok?console.log(`${e} income saved successfully:`,t):console.error(`Error saving ${e} income:`,t)}}catch(t){console.error(`Error saving ${e} income:`,t)}finally{x(t=>({...t,[e]:!1}))}},I={salary:"Salary Income",business:"Business/Self Employed",freelancer:"Freelancer",professional:"Professional Services",pension:"Pension",agriculture:"Agriculture",commission:"Commission/Service",partnership:"Partnership/AOP",property:"Rent/Property Sale",savings:"Profit on Savings",dividend:"Dividend/Capital Gain",other:"Other Income",profitOnSavings:"Profit on Savings",otherIncome:"Other Income",profit_savings:"Profit on Savings",other_income:"Other Income",rent:"Rent",propertySale:"Property Sale",dividendGain:"Dividend/Capital Gain"},T=Array.isArray(e?.incomeSources)?e.incomeSources:[],E=T[s],D=I[E]||"Unknown Income Source",F=t=>{let s=(Array.isArray(e?.incomes)?e.incomes:[]).find(e=>e?.type===t);return{details:s?.details||{},businessEntries:s?.businessEntries||[],otherIncomeInflows:s?.otherIncomeInflows||[]}},B=(s,a,n)=>{let r=Array.isArray(e?.incomes)?[...e.incomes]:[],i=r.findIndex(e=>e?.type===s);if("object"==typeof a){let e={...a.details||{}},t=a.businessEntries||[],n=a.otherIncomeInflows||[];-1===i?r.push({type:s,details:e,businessEntries:t,otherIncomeInflows:n}):r[i]={...r[i],details:{...r[i].details,...e},businessEntries:t,otherIncomeInflows:n}}else"businessEntries"===a||"otherIncomeInflows"===a?-1===i?r.push({type:s,details:{},businessEntries:"businessEntries"===a?n:[],otherIncomeInflows:"otherIncomeInflows"===a?n:[]}):r[i]={...r[i],businessEntries:"businessEntries"===a?n:r[i].businessEntries||[],otherIncomeInflows:"otherIncomeInflows"===a?n:r[i].otherIncomeInflows||[]}:-1===i?r.push({type:s,details:{[a]:n},businessEntries:[],otherIncomeInflows:[]}):r[i]={...r[i],details:{...r[i].details,[a]:n},businessEntries:r[i].businessEntries||[],otherIncomeInflows:r[i].otherIncomeInflows||[]};t("incomes",r),"salary"===s&&("annualSalary"===a||"object"==typeof a&&a.details?.annualSalary)&&t("salaryIncome","object"==typeof a?a.details.annualSalary:n),"business"===s&&("businessIncome"===a||"object"==typeof a&&a.details?.businessIncome)&&t("businessIncome","object"==typeof a?a.details.businessIncome:n),"property"===s&&("rentalIncome"===a||"object"==typeof a&&a.details?.rentalIncome)&&t("rentalIncome","object"==typeof a?a.details.rentalIncome:n),"other"===s&&("otherIncome"===a||"object"==typeof a&&a.details?.otherIncome)&&t("otherIncome","object"==typeof a?a.details.otherIncome:n)},M=e=>{let{details:t,businessEntries:s,otherIncomeInflows:a}=F(e);switch(e){case"salary":return!!(t?.annualSalary&&t?.taxDeducted);case"business":return!!(s&&s.length>0)||N.length>0;case"freelancer":return!!t?.freelanceRevenue;case"professional":return!!(t?.professionalIncome&&y.length>0);case"pension":return!!t?.pensionIncome;case"agriculture":return!!t?.agricultureIncome;case"commission":return!!(t?.lifeInsuranceAmount||t?.generalInsuranceAmount||t?.realEstateTravelAmount||t?.servicesConsultancyAmount||t?.otherCommissionsAmount);case"partnership":return!!(t?.partnershipIncome&&t?.partnershipName);case"property":return!!(t.propertyRentEntries&&t.propertyRentEntries.length>0||t.propertySaleEntries&&t.propertySaleEntries.length>0);case"savings":return!!t?.savingsIncome;case"dividend":return!!(t?.dividendIncome||t?.capitalGain);case"other":return!!(a&&a.length>0);default:return!1}},R=async()=>{let e=T[s],{details:t}=F(e);await P(e,t),s<T.length-1&&n(s+1)},O=e=>{n(e)};return T&&0!==T.length?(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("div",{className:"w-80 flex-shrink-0",children:(0,a.jsxs)(c.Zp,{className:"sticky top-4",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-lg",children:"Income Sources Progress"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[T.length," source",T.length>1?"s":""," selected"]})]}),(0,a.jsxs)(c.Wu,{className:"space-y-3",children:[T.map((e,t)=>{let n=M(e),r=t===s,i=I[e]||"Unknown Source";return(0,a.jsx)("div",{className:`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${r?"border-[#af0e0e] bg-[#af0e0e]/5":n?"border-green-500 bg-green-50 hover:bg-green-100":"border-gray-200 bg-gray-50 hover:bg-gray-100"}`,onClick:()=>O(t),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${r?"bg-[#af0e0e] text-white":n?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:n&&!r?(0,a.jsx)(d.A,{className:"w-4 h-4"}):t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:`font-medium text-sm ${r?"text-[#af0e0e]":""}`,children:i}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:n?"Completed":"Pending"})]})]}),r&&(0,a.jsx)(eI.E,{variant:"outline",children:"Current"})]})},e)}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Progress:"}),(0,a.jsxs)("span",{className:"font-medium",children:[T.filter(e=>M(e)).length," of"," ",T.length," completed"]})]}),(0,a.jsx)("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-[#af0e0e] h-2 rounded-full transition-all duration-300",style:{width:`${T.filter(e=>M(e)).length/T.length*100}%`}})})]})]})]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ZB,{className:"text-lg",children:D}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Step ",s+1," of ",T.length]})]}),(0,a.jsx)(eI.E,{variant:"outline",children:M(E)?"Completed":"In Progress"})]})}),(0,a.jsxs)(c.Wu,{children:[((e,t)=>{let{details:s}=F(e);switch(e){case"salary":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"salaryIncome",children:"Annual Salary (PKR)"}),(0,a.jsx)(p.p,{id:"salaryIncome",value:C(s?.annualSalary||""),onChange:t=>B(e,"annualSalary",S("annualSalary",t.target.value)),placeholder:"Enter annual salary"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"taxDeducted",children:"Tax Deducted by Employer (PKR)"}),(0,a.jsx)(p.p,{id:"taxDeducted",value:C(s?.taxDeducted||""),onChange:t=>B(e,"taxDeducted",S("taxDeducted",t.target.value)),placeholder:"Enter tax deducted"})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{type:"button",className:"text-sm font-medium text-green-600 underline focus:outline-none",onClick:()=>b(t=>({...t,[e]:!t[e]})),children:g[e]?"Hide Advanced":"Show Advanced"})}),g[e]&&(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:"As per your taxable salary, the tax deduction is calculated as follows:"}),[{key:"taDa",label:"Did you receive any T.A/D.A or per diem?",amountKey:"taDaAmount"},{key:"medicalTreatment",label:"Are you provided free of cost medical treatment or hospitalization by your employer?",amountKey:"medicalTreatmentAmount"},{key:"providentFund",label:"Has your employer established a recognized provident fund?",amountKey:"providentFundAmount"},{key:"vehicleProvided",label:"Are you provided with vehicle by your employer?",amountKey:"vehicleProvidedAmount"},{key:"receivedVehicleAfterJune2020",label:"Did you receive the vehicle after June 2020?",amountKey:null},{key:"vehicleCost",label:(0,a.jsxs)("span",{children:["What is the cost of vehicle provided by your employer?"," ",(0,a.jsx)(ee,{className:"inline h-4 w-4 text-gray-500","aria-label":"Cost of vehicle as per employer's records."})]}),amountKey:"vehicleCostAmount"},{key:"otherAllowances",label:"Any other allowances / benefits including bonus received during the year?",amountKey:"otherAllowancesAmount"},{key:"recognizedFundWithdrawal",label:(0,a.jsxs)("span",{children:["Did you receive any amount from a recognized provident/gratuity fund on account of permanent withdrawal of funds?"," ",(0,a.jsx)(ee,{className:"inline h-4 w-4 text-gray-500","aria-label":"Permanent withdrawal means you left the job or retired and withdrew the full amount."})]}),amountKey:"recognizedFundWithdrawalAmount"},{key:"taxBorneByEmployer",label:"Is the tax on your salary borne by your employer?",amountKey:null}].map(t=>(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b pb-2",children:[(0,a.jsx)("span",{className:"text-sm flex-1",children:t.label}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(o.$,{type:"button",variant:s?.[t.key]===!1?"default":"outline",className:s?.[t.key]===!1?"bg-gray-300 text-black":"",onClick:()=>{B(e,t.key,!1),t.amountKey&&B(e,t.amountKey,"")},children:"NO"}),(0,a.jsx)(o.$,{type:"button",variant:s?.[t.key]===!0?"default":"outline",className:s?.[t.key]===!0?"bg-green-600 text-white":"",onClick:()=>B(e,t.key,!0),children:"YES"}),t.amountKey&&s?.[t.key]===!0&&(0,a.jsx)(p.p,{type:"text",placeholder:"Enter amount here",className:"ml-2 w-40",value:s?.[t.amountKey]||"",onChange:s=>B(e,t.amountKey,S(t.amountKey,s.target.value))})]})]},t.key))]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(o.$,{onClick:()=>P(e,s),disabled:u[e],className:"bg-green-600 hover:bg-green-700",children:u[e]?"Saving...":"Save Salary Income"})})]});case"business":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-medium mb-4 text-blue-900",children:"Select Your Business Types"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-6 overflow-x-auto pb-2 scrollbar-hide",children:v.map(e=>{let t=e.icon,s=N.includes(e.key);return(0,a.jsxs)("button",{type:"button",className:`flex flex-col items-center p-3 rounded-lg border-2 transition-all duration-200 focus:outline-none w-32 sm:w-36 md:w-40 h-32 sm:h-36 md:h-40 m-2 bg-white shadow-sm ${s?"border-[#15803d] bg-[#15803d]/10":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>{w(t=>t.includes(e.key)?t.filter(t=>t!==e.key):[...t,e.key])},children:[(0,a.jsx)(t,{className:"h-10 w-10 mb-2"}),(0,a.jsx)("span",{className:"text-base font-medium text-center break-words whitespace-pre-line",children:e.label})]},e.key)})})]}),0===N.length&&(0,a.jsx)("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"No business type selected"}),(0,a.jsx)("div",{className:"text-xs",children:"Select at least one business type above"})]})}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(o.$,{onClick:()=>P(e,{businessTypes:N}),disabled:u[e]||0===N.length,className:"bg-green-600 hover:bg-green-700",children:u[e]?"Saving...":"Save Business Types"})})]});case"professional":let n=[{key:"doctor",label:"Doctor",icon:ek.A},{key:"lawyer",label:"Lawyer",icon:eA},{key:"accountant",label:"Accountant",icon:eC.A},{key:"engineer",label:"Engineer/Architect",icon:eS},{key:"tutor",label:"Tutor/Trainer/Coach",icon:eP},{key:"consultant",label:"Management Consultant",icon:ei.A},{key:"other",label:"Other Professionals",icon:d.A}];return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"text-center mt-4",children:[(0,a.jsx)("h2",{className:"text-4xl font-semibold mb-2",children:"Select your profession service"}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("span",{className:"font-bold underline text-green-600 cursor-pointer text-xl",children:"Need further clarification on the category? Click here"})}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-6 overflow-x-auto pb-2 scrollbar-hide",children:n.map(e=>{let t=e.icon,s=y.includes(e.key);return(0,a.jsxs)("button",{type:"button",className:`flex flex-col items-center p-4 rounded-lg border-2 transition-all duration-200 focus:outline-none w-32 sm:w-36 md:w-40 h-32 sm:h-36 md:h-40 m-2 bg-white shadow-sm ${s?"border-[#15803d] bg-[#15803d]/10":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>{j(t=>t.includes(e.key)?t.filter(t=>t!==e.key):[...t,e.key])},children:[(0,a.jsx)(t,{className:"h-10 w-10 mb-2"}),(0,a.jsx)("span",{className:"text-base font-medium text-center break-words whitespace-pre-line",children:e.label})]},e.key)})})]}),y.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"Professional Income (PKR)"}),(0,a.jsx)(p.p,{value:C(s?.professionalIncome||""),onChange:t=>B(e,"professionalIncome",S("professionalIncome",t.target.value)),placeholder:"Enter professional income"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"Professional Expenses (PKR)"}),(0,a.jsx)(p.p,{value:C(s?.professionalExpenses||""),onChange:t=>B(e,"professionalExpenses",S("professionalExpenses",t.target.value)),placeholder:"Enter professional expenses"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"Tax Paid (PKR)"}),(0,a.jsx)(p.p,{value:C(s?.professionalTaxPaid||""),onChange:t=>B(e,"professionalTaxPaid",S("professionalTaxPaid",t.target.value)),placeholder:"Enter tax paid"})]})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(o.$,{onClick:()=>P(e,s),disabled:u[e],className:"bg-green-600 hover:bg-green-700",children:u[e]?"Saving...":"Save Professional Income"})})]})]});case"freelancer":return(0,a.jsxs)("div",{className:"space-y-6",children:[null===k&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:["Did you earn any income from abroad by providing",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-3xl",children:"IT-enabled services"})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("span",{className:"font-semibold underline text-green-600 cursor-pointer",children:"Need further clarification on the category? Click here"})}),(0,a.jsxs)("div",{className:"flex justify-center gap-8 mt-8",children:[(0,a.jsxs)(o.$,{type:"button",variant:!0===k?"default":"outline",className:"flex flex-col items-center px-8 py-6 text-xl",onClick:()=>A(!0),children:[(0,a.jsx)("span",{className:"text-green-600 text-4xl mb-2",children:""})," Yes"]}),(0,a.jsxs)(o.$,{type:"button",variant:!1===k?"destructive":"outline",className:"flex flex-col items-center px-8 py-6 text-xl",onClick:()=>A(!1),children:[(0,a.jsx)("span",{className:"text-green-600 text-4xl mb-2",children:""})," No"]})]})]}),null!==k&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"Total Earnings (PKR)"}),(0,a.jsx)(p.p,{value:C(s?.freelanceRevenue||""),onChange:t=>B(e,"freelanceRevenue",S("freelanceRevenue",t.target.value)),placeholder:"Enter total earnings"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"Expenses (PKR)"}),(0,a.jsx)(p.p,{value:C(s?.freelanceDirectExpense||""),onChange:t=>B(e,"freelanceDirectExpense",S("freelanceDirectExpense",t.target.value)),placeholder:"Enter expenses"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"Tax Paid (PKR)"}),(0,a.jsx)(p.p,{value:C(s?.freelanceTaxDeducted||""),onChange:t=>B(e,"freelanceTaxDeducted",S("freelanceTaxDeducted",t.target.value)),placeholder:"Enter tax paid"})]})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(o.$,{onClick:()=>P(e,s),disabled:u[e],className:"bg-green-600 hover:bg-green-700",children:u[e]?"Saving...":"Save Freelancer Income"})})]})]});default:return(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Income section for ",t," is not yet implemented."]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:()=>P(e,{}),disabled:u[e],className:"bg-green-600 hover:bg-green-700",children:u[e]?"Saving...":`Save ${t}`})})]})}})(E,D),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,a.jsxs)(o.$,{variant:"outline",onClick:()=>{s>0&&n(s-1)},disabled:0===s,className:"flex items-center bg-transparent",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Previous Income"]}),(0,a.jsxs)(o.$,{variant:"outline",onClick:R,disabled:s===T.length-1,className:"flex items-center bg-transparent",children:["Next Income",(0,a.jsx)(m.A,{className:"w-4 h-4 ml-2"})]})]})]})]})})]}):(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{children:"No income sources selected. Please go back to Step 3 to select your income sources."})})}function eE({formData:e,handleInputChange:t,nextStep:s}){let n=(0,l.useParams)();n?.id;let[r,c]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1),[m,x]=(0,i.useState)({transactionType:"",bankName:"",accountNumber:"",taxDeducted:""}),[f,g]=(0,i.useState)(!1),[b,y]=(0,i.useState)({activityType:"",vehicleType:"",registrationNumber:"",taxDeducted:""}),[j,v]=(0,i.useState)(!1),[N,w]=(0,i.useState)({utilityType:"",provider:"",consumerNumber:"",taxDeducted:""}),[k,A]=(0,i.useState)(!1),[C,S]=(0,i.useState)({purchase:!1,sale:!1,functions:!1,pension:!1});function P(s){let a=Array.isArray(e.deductions)?[...e.deductions]:[];a.includes(s)?(t("deductions",a.filter(e=>e!==s)),"bank_transactions"===s&&h(!1),"vehicles"===s&&g(!1),"utilities"===s&&v(!1),"other"===s&&A(!1)):(t("deductions",[...a,s]),"bank_transactions"===s&&h(!0),"vehicles"===s&&g(!0),"utilities"===s&&v(!0),"other"===s&&A(!0))}async function I(){try{c(!0);let s=(await et.A.post("http://localhost:5000/api/deduction/bank-transaction",{userId:"64fd06ddc7a225c86e8f2345",taxYear:"2024-2025",transactionType:m.transactionType,bankName:m.bankName,accountNumber:m.accountNumber,taxDeducted:parseFloat(m.taxDeducted.replace(/,/g,""))||0})).data.data,a=e.deductionDetails?.bankTransactions||[];t("deductionDetails",{...e.deductionDetails,bankTransactions:[...a,s]}),x({transactionType:"",bankName:"",accountNumber:"",taxDeducted:""}),(0,es.oR)({title:"Success",description:"Bank transaction saved successfully"})}catch(e){console.error("Error saving bank transaction:",e),(0,es.oR)({title:"Error",description:"Failed to save bank transaction",variant:"destructive"})}finally{c(!1)}}async function T(){try{c(!0);let s=(await et.A.post("http://localhost:5000/api/deduction/vehicle-deduction",{userId:"64fd06ddc7a225c86e8f2345",taxYear:"2024-2025",activityType:b.activityType,vehicleType:b.vehicleType,registrationNumber:b.registrationNumber,taxDeducted:parseFloat(b.taxDeducted.replace(/,/g,""))||0})).data.data,a=e.deductionDetails?.vehicles||[];t("deductionDetails",{...e.deductionDetails,vehicles:[...a,s]}),y({activityType:"",vehicleType:"",registrationNumber:"",taxDeducted:""}),(0,es.oR)({title:"Success",description:"Vehicle deduction saved successfully"})}catch(e){console.error("Error saving vehicle deduction:",e),(0,es.oR)({title:"Error",description:"Failed to save vehicle deduction",variant:"destructive"})}finally{c(!1)}}async function E(){try{c(!0);let s=(await et.A.post("http://localhost:5000/api/deduction/utility-deduction",{userId:"64fd06ddc7a225c86e8f2345",taxYear:"2024-2025",utilityType:N.utilityType,provider:N.provider,consumerNumber:N.consumerNumber,taxDeducted:parseFloat(N.taxDeducted.replace(/,/g,""))||0})).data.data,a=e.deductionDetails?.utilities||[];t("deductionDetails",{...e.deductionDetails,utilities:[...a,s]}),w({utilityType:"",provider:"",consumerNumber:"",taxDeducted:""}),(0,es.oR)({title:"Success",description:"Utility deduction saved successfully"})}catch(e){console.error("Error saving utility deduction:",e),(0,es.oR)({title:"Error",description:"Failed to save utility deduction",variant:"destructive"})}finally{c(!1)}}function D(e,t){x(s=>({...s,[e]:t}))}function F(e,t){y(s=>({...s,[e]:t}))}function B(e,t){w(s=>({...s,[e]:t}))}function M(e,t){S(s=>({...s,[e]:t}))}function R(s,a){t("deductionDetails",{...e.deductionDetails,other:{...e.deductionDetails?.other,[s]:parseFloat(a.replace(/,/g,""))||0}})}return(0,a.jsxs)("div",{className:"flex flex-col items-center w-full mt-8",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-center mb-2",children:["Here are some of the ",(0,a.jsx)("span",{className:"text-[#15803d]",children:"common withholding taxes"})," you might have paid"]}),(0,a.jsx)("div",{className:"text-center text-lg text-muted-foreground mb-2",children:"If you haven't paid any advance tax on these activities then click continue"}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("span",{className:"font-bold underline text-[#15803d] text-lg cursor-pointer",children:"Adjustment for taxes"})}),(0,a.jsxs)("div",{className:"flex flex-row justify-center gap-16 mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>P("bank_transactions"),children:[(0,a.jsx)("span",{className:"mb-2",children:(0,a.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[(0,a.jsx)("rect",{x:"8",y:"16",width:"48",height:"32",rx:"8",fill:"#f87171"}),(0,a.jsx)("rect",{x:"16",y:"24",width:"32",height:"16",rx:"4",fill:"#fbbf24"}),(0,a.jsx)("text",{x:"32",y:"38",textAnchor:"middle",fontSize:"18",fontWeight:"bold",fill:"#fff",children:""})]})}),(0,a.jsx)("span",{className:"text-lg mt-1",children:"Bank Transaction"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>P("vehicles"),children:[(0,a.jsx)("span",{className:"mb-2",children:(0,a.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[(0,a.jsx)("rect",{x:"12",y:"32",width:"40",height:"16",rx:"8",fill:"#64748b"}),(0,a.jsx)("circle",{cx:"20",cy:"52",r:"6",fill:"#ef4444"}),(0,a.jsx)("circle",{cx:"44",cy:"52",r:"6",fill:"#ef4444"}),(0,a.jsx)("rect",{x:"20",y:"24",width:"24",height:"12",rx:"4",fill:"#fbbf24"})]})}),(0,a.jsx)("span",{className:"text-lg mt-1",children:"Vehicle"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>P("utilities"),children:[(0,a.jsx)("span",{className:"mb-2",children:(0,a.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[(0,a.jsx)("rect",{x:"20",y:"28",width:"24",height:"24",rx:"8",fill:"#fbbf24"}),(0,a.jsx)("polygon",{points:"32,28 40,12 48,28",fill:"#f87171"}),(0,a.jsx)("rect",{x:"28",y:"40",width:"8",height:"8",rx:"2",fill:"#38bdf8"})]})}),(0,a.jsx)("span",{className:"text-lg mt-1",children:"Utilities"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>P("other"),children:[(0,a.jsx)("span",{className:"mb-2",children:(0,a.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",children:[(0,a.jsx)("rect",{x:"16",y:"32",width:"32",height:"16",rx:"8",fill:"#34d399"}),(0,a.jsx)("rect",{x:"24",y:"24",width:"16",height:"16",rx:"4",fill:"#fbbf24"}),(0,a.jsx)("circle",{cx:"32",cy:"40",r:"6",fill:"#f87171"})]})}),(0,a.jsx)("span",{className:"text-lg mt-1",children:"Other"})]})]}),d&&(0,a.jsxs)("div",{className:"w-full max-w-xl mx-auto mt-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Bank Transaction"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Transaction Type"}),(0,a.jsxs)(u.l6,{value:m.transactionType,onValueChange:e=>D("transactionType",e),children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Select Transaction Type"})}),(0,a.jsx)(u.gC,{children:["Foreign Credit Card Transactions","Domestic Credit Card Transactions","Wire Transfer","Remittance","Other"].map(e=>(0,a.jsx)(u.eb,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Select Bank"}),(0,a.jsxs)(u.l6,{value:m.bankName,onValueChange:e=>D("bankName",e),children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Select Bank"})}),(0,a.jsx)(u.gC,{children:["National Bank of Pakistan (NBP)","First Women Bank Limited (FWBL)","Zarai Taraqiati Bank Limited (ZTBL)","The Bank of Khyber (BoK)","The Bank of Punjab (BoP)","Sindh Bank Limited","Habib Bank Limited (HBL)","United Bank Limited (UBL)","MCB Bank Limited","Allied Bank Limited (ABL)","Askari Bank Limited","Faysal Bank Limited","Bank Alfalah Limited","Meezan Bank Limited","JS Bank Limited","Soneri Bank Limited","Bank of Islamabad","Summit Bank Limited","Bank Al Habib Limited","The Punjab Provincial Cooperative Bank Ltd","MCB Islamic Bank Limited","Bank Islami Pakistan Limited","Dubai Islamic Bank Pakistan Limited (DIBPL)","Al Baraka Bank Pakistan Limited","U Microfinance Bank Limited (U Bank)","Standard Chartered Bank (Pakistan) Ltd","Deutsche Bank AG","Industrial and Commercial Bank of China (ICBC)","Bank of China Limited","Citibank N.A.","Pak Oman Investment Company Limited","Pak Libya Holding Company","Pak Brunei Investment Company","Pak Kuwait Investment Company","Pakistan Industrial Credit and Investment Corporation (PICIC)","House Building Finance Corporation (HBFC)"].map(e=>(0,a.jsx)(u.eb,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Account No."}),(0,a.jsx)(p.p,{value:m.accountNumber,onChange:e=>D("accountNumber",e.target.value),placeholder:"Enter account number"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Tax Deducted"}),(0,a.jsx)(p.p,{value:m.taxDeducted,onChange:e=>D("taxDeducted",e.target.value),placeholder:"Enter tax deducted"})]}),(0,a.jsx)(o.$,{className:"mt-4 bg-gradient-to-r from-green-500 to-green-400 text-white text-lg font-bold",onClick:I,disabled:r,children:r?"Saving...":"Add New Bank"})]}),Array.isArray(e.deductionDetails?.bankTransactions)&&e.deductionDetails.bankTransactions.length>0&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("table",{className:"min-w-full border",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2",children:"Transaction Type"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Bank"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Account No."}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Tax Deducted"})]})}),(0,a.jsx)("tbody",{children:e.deductionDetails.bankTransactions.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:e.transactionType}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.bankName}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.accountNumber}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.taxDeducted})]},t))})]})})]}),f&&(0,a.jsxs)("div",{className:"w-full max-w-xl mx-auto mt-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Vehicles"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Select types of activity"}),(0,a.jsxs)(u.l6,{value:b.activityType,onValueChange:e=>F("activityType",e),children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Select activity"})}),(0,a.jsx)(u.gC,{children:["Registration","Transfer","Sale","Vehicle Tax","Motor Vehicle Tax","Other"].map(e=>(0,a.jsx)(u.eb,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Select type of vehicle"}),(0,a.jsxs)(u.l6,{value:b.vehicleType,onValueChange:e=>F("vehicleType",e),children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Select vehicle"})}),(0,a.jsx)(u.gC,{children:["Car","Motorcycle","Van","Jeep","Rickshaw","Other"].map(e=>(0,a.jsx)(u.eb,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Registration No."}),(0,a.jsx)(p.p,{value:b.registrationNumber,onChange:e=>F("registrationNumber",e.target.value),placeholder:"Enter registration number"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Tax Deducted"}),(0,a.jsx)(p.p,{value:b.taxDeducted,onChange:e=>F("taxDeducted",e.target.value),placeholder:"Enter tax deducted"})]}),(0,a.jsx)(o.$,{className:"mt-4 bg-gradient-to-r from-green-500 to-green-400 text-white text-lg font-bold",onClick:T,disabled:r,children:r?"Saving...":"Add Another Vehicle"})]}),Array.isArray(e.deductionDetails?.vehicles)&&e.deductionDetails.vehicles.length>0&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("table",{className:"min-w-full border",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2",children:"Activity Type"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Vehicle Type"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Registration No."}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Tax Deducted"})]})}),(0,a.jsx)("tbody",{children:e.deductionDetails.vehicles.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:e.activityType}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.vehicleType}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.registrationNumber}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.taxDeducted})]},t))})]})})]}),j&&(0,a.jsxs)("div",{className:"w-full max-w-xl mx-auto mt-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Utilities"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Select types of utility service"}),(0,a.jsxs)(u.l6,{value:N.utilityType,onValueChange:e=>B("utilityType",e),children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Select utility service"})}),(0,a.jsx)(u.gC,{children:["Cellphone","Telephone","Internet","Electricity"].map(e=>(0,a.jsx)(u.eb,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Provider"}),(0,a.jsx)(p.p,{value:N.provider,onChange:e=>B("provider",e.target.value),placeholder:"Enter provider type"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Consumer No. / Registered No."}),(0,a.jsx)(p.p,{value:N.consumerNumber,onChange:e=>B("consumerNumber",e.target.value),placeholder:"Enter consumer or registered number"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-48 text-right text-lg font-medium",children:"Tax Deducted"}),(0,a.jsx)(p.p,{value:N.taxDeducted,onChange:e=>B("taxDeducted",e.target.value),placeholder:"Enter tax deducted"})]}),(0,a.jsx)(o.$,{className:"mt-4 bg-gradient-to-r from-green-500 to-green-400 text-white text-lg font-bold",onClick:E,disabled:r,children:r?"Saving...":"Add New Utility"}),(0,a.jsx)("div",{className:"text-center mt-2 text-gray-700 underline cursor-pointer",children:"View All Utilities"})]}),Array.isArray(e.deductionDetails.utilities)&&e.deductionDetails.utilities.length>0&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("table",{className:"min-w-full border",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2",children:"Utility Type"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Provider"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Consumer/Reg. No."}),(0,a.jsx)("th",{className:"px-4 py-2",children:"Tax Deducted"})]})}),(0,a.jsx)("tbody",{children:e.deductionDetails.utilities.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2",children:e.utilityType}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.provider}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.consumerNumber}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.taxDeducted})]},t))})]})})]}),k&&(0,a.jsxs)("div",{className:"w-full max-w-3xl mx-auto mt-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Others"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"checkbox",checked:C.purchase,onChange:e=>M("purchase",e.target.checked),className:"accent-green-700 w-5 h-5"}),(0,a.jsx)("label",{className:"w-96 text-right text-lg font-medium",children:"Tax paid at the time of property transaction - Purchase"}),C.purchase&&(0,a.jsx)("input",{className:"border rounded-lg px-4 py-2 text-lg flex-1",placeholder:"Enter amount here",value:e.deductionDetails?.other?.propertyPurchase||"",onChange:e=>R("propertyPurchase",e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"checkbox",checked:C.sale,onChange:e=>M("sale",e.target.checked),className:"accent-green-700 w-5 h-5"}),(0,a.jsx)("label",{className:"w-96 text-right text-lg font-medium",children:"Tax paid at the time of property transaction - Sale"}),C.sale&&(0,a.jsx)("input",{className:"border rounded-lg px-4 py-2 text-lg flex-1",placeholder:"Enter amount here",value:e.deductionDetails?.other?.propertySale||"",onChange:e=>R("propertySale",e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"checkbox",checked:C.functions,onChange:e=>M("functions",e.target.checked),className:"accent-green-700 w-5 h-5"}),(0,a.jsx)("label",{className:"w-96 text-right text-lg font-medium",children:"Functions & Gathering"}),C.functions&&(0,a.jsx)("input",{className:"border rounded-lg px-4 py-2 text-lg flex-1",placeholder:"Enter amount here",value:e.deductionDetails?.other?.gatherings||"",onChange:e=>R("gatherings",e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"checkbox",checked:C.pension,onChange:e=>M("pension",e.target.checked),className:"accent-green-700 w-5 h-5"}),(0,a.jsx)("label",{className:"w-96 text-right text-lg font-medium",children:"Withdrawal of funds from Voluntary Pension Scheme"}),C.pension&&(0,a.jsx)("input",{className:"border rounded-lg px-4 py-2 text-lg flex-1",placeholder:"Enter amount here",value:e.deductionDetails?.other?.pensionWithdrawal||"",onChange:e=>R("pensionWithdrawal",e.target.value)})]})]})]})]})}function eD({formData:e,handleInputChange:t}){let[s,n]=(0,i.useState)(!1);return(0,l.useRouter)(),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] w-full",children:[(0,a.jsx)("div",{className:"mb-2 mt-4",children:(0,a.jsx)("span",{className:"inline-block mb-2",children:(0,a.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"16",y:"32",width:"32",height:"20",rx:"4",fill:"#f87171"}),(0,a.jsx)("polygon",{points:"32,12 12,32 52,32",fill:"#38bdf8"}),(0,a.jsx)("rect",{x:"28",y:"40",width:"8",height:"12",rx:"2",fill:"#fff"}),(0,a.jsx)("rect",{x:"40",y:"40",width:"8",height:"8",rx:"2",fill:"#fde68a"}),(0,a.jsx)("rect",{x:"16",y:"52",width:"32",height:"4",rx:"2",fill:"#d1d5db"})]})})}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-center mb-2",children:[(0,a.jsx)("span",{className:"font-black",children:"For your Wealth Reconciliation"}),", we need to determine",(0,a.jsx)("br",{}),"your wealth at the beginning of the tax year 2025."]}),(0,a.jsxs)("div",{className:"text-center text-lg text-muted-foreground mb-2",children:["Please enter your total wealth as at July 1, 2024, which is closing wealth of",(0,a.jsx)("br",{}),"your wealth statement for the tax year 2024."]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("span",{className:"font-bold underline text-[#15803d] text-lg cursor-pointer",children:"Wealth Statement"})}),(0,a.jsx)("div",{className:"w-full flex justify-center mb-6",children:(0,a.jsx)(p.p,{id:"openingWealth",type:"text",value:e.wealthStatement?.openingWealth||"",onChange:s=>{let a=s.target.value;""===a||/^\d+$/.test(a)?t("wealthStatement",{...e.wealthStatement,openingWealth:""===a?0:Number(a)}):(0,es.oR)({title:"Invalid Input",description:"Please enter a valid number for opening wealth.",variant:"destructive"})},placeholder:"Enter opening wealth",className:"max-w-xl text-2xl px-6 py-4 text-center border-2 border-blue-200 focus:border-blue-400"})})]})}let eF=(0,Q.A)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var eB=s(99891);let eM=(0,Q.A)("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),eR=(0,Q.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),eO=(0,Q.A)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);function eL({formData:e,handleInputChange:t}){let[s,n]=(0,i.useState)(!1);(0,l.useRouter)();let r=[{id:"properties",label:"Properties",icon:em.A},{id:"vehicles",label:"Vehicles",icon:ev},{id:"bankAccounts",label:"Bank Accounts",icon:eF},{id:"insurances",label:"Insurances",icon:eB.A},{id:"possessions",label:"Possessions",icon:eM},{id:"foreignAssets",label:"Foreign Assets",icon:eR},{id:"cash",label:"Cash",icon:ep.A},{id:"otherAssets",label:"Other Assets",icon:eO}],o=(s,a)=>{let n=Array.isArray(e.selectedAssets)?e.selectedAssets:[];t("selectedAssets",a?[...n,s]:n.filter(e=>e!==s))};return(0,a.jsxs)(c.Zp,{className:"max-w-4xl mx-auto bg-white shadow-xl rounded-xl overflow-hidden",children:[(0,a.jsxs)(c.aR,{className:"bg-gradient-to-r from-green-700 to-green-500 text-white p-6",children:[(0,a.jsx)(c.ZB,{className:"text-2xl font-bold",children:"Select Your Assets"}),(0,a.jsx)("p",{className:"text-sm opacity-80",children:"Choose the types of assets you want to declare"})]}),(0,a.jsxs)(c.Wu,{className:"p-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map(t=>(0,a.jsxs)("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors cursor-pointer animate-fade-in",onClick:()=>o(t.id,!e.selectedAssets?.includes(t.id)),children:[(0,a.jsx)(g.S,{id:t.id,checked:e.selectedAssets?.includes(t.id)||!1,onCheckedChange:e=>o(t.id,!!e),className:"mr-3"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(t.icon,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)(f.J,{htmlFor:t.id,className:"text-sm font-medium text-gray-700 cursor-pointer",children:t.label})]})]},t.id))}),(0,a.jsx)("div",{className:"mt-8 flex justify-end"})]})]})}var e$=s(41862),eW=s(11860);let eq="http://localhost:5000/api/assets",eY={async saveProperty(e){let t=await fetch(`${eq}/property`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,taxYear:e.taxYear,propertyType:e.propertyType,size:e.size,unitType:e.unitType,address:e.address,fbrValue:e.fbrValue,cost:e.cost})});if(!t.ok)throw Error("Failed to save property");return t.json()},async saveVehicle(e){let t=await fetch(`${eq}/vehicle`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,taxYear:e.taxYear,vehicleType:e.vehicleType,registrationNumber:e.registrationNo,cost:e.cost})});if(!t.ok)throw Error("Failed to save vehicle");return t.json()},async saveBankAccount(e){let t=await fetch(`${eq}/bank-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,taxYear:e.taxYear,bankName:e.bankName,accountNumber:e.accountNo,balance:e.cost})});if(!t.ok)throw Error("Failed to save bank account");return t.json()},async saveInsurance(e){let t=await fetch(`${eq}/insurance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,taxYear:e.taxYear,companyName:e.companyName,description:e.description,premiumPaid:e.premiumPaid})});if(!t.ok)throw Error("Failed to save insurance");return t.json()},async savePossession(e){let t=await fetch(`${eq}/possession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,taxYear:e.taxYear,possessionType:e.possessionType,description:e.description,cost:e.cost})});if(!t.ok)throw Error("Failed to save possession");return t.json()},async saveForeignAsset(e){let t=await fetch(`${eq}/foreign-asset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,taxYear:e.taxYear,description:e.description,cost:e.cost})});if(!t.ok)throw Error("Failed to save foreign asset");return t.json()},async saveCash(e){let t=await fetch(`${eq}/cash`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,taxYear:e.taxYear,balance:e.balance})});if(!t.ok)throw Error("Failed to save cash balance");return t.json()},async saveOtherAsset(e){let t=await fetch(`${eq}/other-asset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,taxYear:e.taxYear,transactionType:e.transactionType,description:e.description,amount:e.amount})});if(!t.ok)throw Error("Failed to save other asset");return t.json()}};function ez({formData:e,handleInputChange:t}){let[s,n]=(0,i.useState)(0),[r,l]=(0,i.useState)({}),x=e.userId||"64fd06ddc7a225c86e8f2345",g=e.taxYear||"2024-2025",b=(e,t)=>{l(s=>({...s,[e]:t}))},y=e=>{let t=e.replace(/[^\d]/g,"");return t?Number.parseInt(t).toLocaleString():""},j=e=>e.replace(/[^\d]/g,""),v={properties:{label:"Properties",icon:em.A},vehicles:{label:"Vehicles",icon:ev},bankAccounts:{label:"Bank Accounts",icon:eF},insurances:{label:"Insurances",icon:eB.A},possessions:{label:"Possessions",icon:eM},foreignAssets:{label:"Foreign Assets",icon:eR},cash:{label:"Cash",icon:ep.A},otherAssets:{label:"Other Assets",icon:eO}},N=Array.isArray(e.selectedAssets)?e.selectedAssets:[],w=N[s]||"",k=v[w]?.label||"Unknown Asset",A=v[w]?.icon,C=(0,i.useCallback)((s,a)=>{let n={...e.wealthStatement.assets,...a};t("wealthStatement",{...e.wealthStatement,assets:n})},[e.wealthStatement?.assets,t]),S=t=>{let s=e.wealthStatement?.assets;switch(t){case"properties":return!!(s?.properties&&s.properties.length>0);case"vehicles":return!!(s?.vehicles&&s.vehicles.length>0);case"bankAccounts":return!!(s?.bankAccounts&&s.bankAccounts.length>0);case"insurances":return!!(s?.insurances&&s.insurances.length>0);case"possessions":return!!(s?.possessions&&s.possessions.length>0);case"foreignAssets":return!!(s?.foreignAssets&&s.foreignAssets.length>0);case"cash":return!!(s?.cash&&s.cash.balance>0);case"otherAssets":return!!(s?.otherAssets&&s.otherAssets.length>0);default:return!1}},P=e=>{n(e)};return 0===N.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{children:"No assets selected. Please go back to select applicable assets."})}):(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("div",{className:"w-full md:w-80 flex-shrink-0",children:(0,a.jsxs)(c.Zp,{className:"sticky top-4",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-lg",children:"Assets Progress"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[N.length," asset",N.length>1?"s":""," selected"]})]}),(0,a.jsxs)(c.Wu,{className:"space-y-3",children:[N.map((e,t)=>{let n=S(e),r=t===s,i=v[e].label,l=v[e].icon;return(0,a.jsx)("div",{className:`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${r?"border-green-600 bg-green-600/5":n?"border-green-600 bg-green-50 hover:bg-green-100":"border-gray-200 bg-gray-50 hover:bg-gray-100"}`,onClick:()=>P(t),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${r?"bg-green-600 text-white":n?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:n&&!r?(0,a.jsx)(d.A,{className:"w-4 h-4"}):t+1}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l,{className:`w-4 h-4 ${r?"text-green-600":""}`}),(0,a.jsx)("div",{className:`font-medium text-sm ${r?"text-green-600":""}`,children:i})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:n?"Completed":"Pending"})]})]}),r&&(0,a.jsx)(eI.E,{variant:"outline",children:"Current"})]})},e)}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Progress:"}),(0,a.jsxs)("span",{className:"font-medium",children:[N.filter(e=>S(e)).length," of"," ",N.length," completed"]})]}),(0,a.jsx)("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${N.filter(e=>S(e)).length/N.length*100}%`}})})]})]})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.ZB,{className:"text-lg flex items-center gap-2",children:[A&&(0,a.jsx)(A,{className:"w-5 h-5 text-green-600"}),k]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Step ",s+1," of ",N.length]})]}),(0,a.jsx)(eI.E,{variant:"outline",children:S(w)?"Completed":"In Progress"})]})}),(0,a.jsx)(c.Wu,{children:(t=>{let s=e.wealthStatement?.assets||{},n=r[t]||!1;switch(t){case"properties":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50/50 animate-fade-in",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Add Property Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"propertyType",children:"Property Type"}),(0,a.jsxs)(u.l6,{value:s.newProperty?.propertyType||"",onValueChange:e=>C("properties",{newProperty:{...s.newProperty,propertyType:e}}),disabled:n,children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select type"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"residential",children:"Residential"}),(0,a.jsx)(u.eb,{value:"commercial",children:"Commercial"}),(0,a.jsx)(u.eb,{value:"plot",children:"Plot"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"size",children:"Size"}),(0,a.jsx)(p.p,{id:"size",value:s.newProperty?.size||"",onChange:e=>C("properties",{newProperty:{...s.newProperty,size:e.target.value}}),placeholder:"Enter size (e.g., 500)",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"unitType",children:"Unit Type"}),(0,a.jsxs)(u.l6,{value:s.newProperty?.unitType||"",onValueChange:e=>C("properties",{newProperty:{...s.newProperty,unitType:e}}),disabled:n,children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select unit"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"sqft",children:"Square Feet"}),(0,a.jsx)(u.eb,{value:"sqm",children:"Square Meters"}),(0,a.jsx)(u.eb,{value:"marla",children:"Marla"}),(0,a.jsx)(u.eb,{value:"kanal",children:"Kanal"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"address",children:"Address"}),(0,a.jsx)(p.p,{id:"address",value:s.newProperty?.address||"",onChange:e=>C("properties",{newProperty:{...s.newProperty,address:e.target.value}}),placeholder:"Enter address",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"fbrValue",children:"FBR Value (PKR)"}),(0,a.jsx)(p.p,{id:"fbrValue",value:y(s.newProperty?.fbrValue||""),onChange:e=>C("properties",{newProperty:{...s.newProperty,fbrValue:j(e.target.value)}}),placeholder:"Enter FBR value",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"cost",children:"Cost (PKR)"}),(0,a.jsx)(p.p,{id:"cost",value:y(s.newProperty?.cost||""),onChange:e=>C("properties",{newProperty:{...s.newProperty,cost:j(e.target.value)}}),placeholder:"Enter cost",disabled:n})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:async()=>{let{propertyType:e,size:t,unitType:a,address:n,fbrValue:r,cost:i}=s.newProperty||{};if(!e||!t||!a||!n||!r||!i){(0,es.oR)({title:"Error",description:"Please fill all required fields for property.",variant:"destructive"});return}if(isNaN(Number(t))||isNaN(Number(r))||isNaN(Number(i))){(0,es.oR)({title:"Error",description:"Size, FBR value, and cost must be valid numbers.",variant:"destructive"});return}b("properties",!0);try{let l={...(await eY.saveProperty({userId:x,taxYear:g,propertyType:e,size:Number(t),unitType:a,address:n,fbrValue:Number(r),cost:Number(i)})).data,propertyType:e,size:Number(t),unitType:a,address:n,fbrValue:Number(r),cost:Number(i)},c=Array.isArray(s.properties)?[...s.properties]:[];C("properties",{properties:[...c,l],newProperty:{propertyType:"",size:"",unitType:"",address:"",fbrValue:"",cost:""}}),(0,es.oR)({title:"Success",description:"Property saved successfully to database."})}catch(e){(0,es.oR)({title:"Error",description:"Failed to save property. Please try again.",variant:"destructive"})}finally{b("properties",!1)}},disabled:n||!s.newProperty?.propertyType||!s.newProperty?.size||!s.newProperty?.unitType||!s.newProperty?.address||!s.newProperty?.fbrValue||!s.newProperty?.cost,className:"w-full md:w-auto bg-green-600 hover:bg-green-700",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Property"]})})})]}),s.properties&&s.properties.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Properties"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:s.properties.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-white relative group hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full bg-green-200 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C("properties",{properties:s.properties.filter((e,s)=>s!==t)})},children:(0,a.jsx)(eW.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"space-y-2 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.E,{variant:"outline",className:"text-xs",children:e.propertyType}),e._id&&(0,a.jsx)(eI.E,{variant:"secondary",className:"text-xs",children:"Saved"})]}),(0,a.jsxs)("div",{className:"font-medium text-sm",children:[e.size," ",e.unitType]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Address:"}),(0,a.jsx)("div",{className:"font-medium",children:e.address})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Cost:"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["PKR ",e.cost.toLocaleString()]})]})]})]})]},t))}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Cost:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR ",s.properties.reduce((e,t)=>e+t.cost,0).toLocaleString()]})]})})]}):(0,a.jsx)("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"No properties added yet"}),(0,a.jsx)("div",{className:"text-xs",children:"Add your first property using the form above"})]})})]});case"vehicles":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50/50 animate-fade-in",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Add Vehicle Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"vehicleType",children:"Vehicle Type"}),(0,a.jsxs)(u.l6,{value:s.newVehicle?.vehicleType||"",onValueChange:e=>C("vehicles",{newVehicle:{...s.newVehicle,vehicleType:e}}),disabled:n,children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select type"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"car",children:"Car"}),(0,a.jsx)(u.eb,{value:"motorcycle",children:"Motorcycle"}),(0,a.jsx)(u.eb,{value:"van",children:"Van"}),(0,a.jsx)(u.eb,{value:"jeep",children:"Jeep"}),(0,a.jsx)(u.eb,{value:"rickshaw",children:"Rickshaw"}),(0,a.jsx)(u.eb,{value:"other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"cost",children:"Cost (PKR)"}),(0,a.jsx)(p.p,{id:"cost",value:y(s.newVehicle?.cost||""),onChange:e=>C("vehicles",{newVehicle:{...s.newVehicle,cost:j(e.target.value)}}),placeholder:"Enter cost",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"registrationNo",children:"Registration No"}),(0,a.jsx)(p.p,{id:"registrationNo",value:s.newVehicle?.registrationNo||"",onChange:e=>C("vehicles",{newVehicle:{...s.newVehicle,registrationNo:e.target.value}}),placeholder:"Enter registration number",disabled:n})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:async()=>{let{vehicleType:e,cost:t,registrationNo:a}=s.newVehicle||{};if(!e||!t||!a){(0,es.oR)({title:"Error",description:"Please fill all required fields for vehicle.",variant:"destructive"});return}if(isNaN(Number(t))){(0,es.oR)({title:"Error",description:"Cost must be a valid number.",variant:"destructive"});return}b("vehicles",!0);try{let n={...(await eY.saveVehicle({userId:x,taxYear:g,vehicleType:e,cost:Number(t),registrationNo:a})).data,vehicleType:e,cost:Number(t),registrationNo:a},r=Array.isArray(s.vehicles)?[...s.vehicles]:[];C("vehicles",{vehicles:[...r,n],newVehicle:{vehicleType:"",cost:"",registrationNo:""}}),(0,es.oR)({title:"Success",description:"Vehicle saved successfully to database."})}catch(e){(0,es.oR)({title:"Error",description:"Failed to save vehicle. Please try again.",variant:"destructive"})}finally{b("vehicles",!1)}},disabled:n||!s.newVehicle?.vehicleType||!s.newVehicle?.cost||!s.newVehicle?.registrationNo,className:"w-full md:w-auto bg-green-600 hover:bg-green-700",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Vehicle"]})})})]}),s.vehicles&&s.vehicles.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Vehicles"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:s.vehicles.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-white relative group hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full bg-green-200 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C("vehicles",{vehicles:s.vehicles.filter((e,s)=>s!==t)})},children:(0,a.jsx)(eW.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"space-y-2 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.E,{variant:"outline",className:"text-xs",children:e.vehicleType}),e._id&&(0,a.jsx)(eI.E,{variant:"secondary",className:"text-xs",children:"Saved"})]}),(0,a.jsx)("div",{className:"font-medium text-sm",children:e.registrationNo}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Cost:"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["PKR ",e.cost.toLocaleString()]})]})})]})]},t))}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Cost:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR ",s.vehicles.reduce((e,t)=>e+t.cost,0).toLocaleString()]})]})})]}):(0,a.jsx)("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"No vehicles added yet"}),(0,a.jsx)("div",{className:"text-xs",children:"Add your first vehicle using the form above"})]})})]});case"bankAccounts":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50/50 animate-fade-in",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Add Bank Account Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"bankName",children:"Bank Name"}),(0,a.jsx)(p.p,{id:"bankName",value:s.newBankAccount?.bankName||"",onChange:e=>C("bankAccounts",{newBankAccount:{...s.newBankAccount,bankName:e.target.value}}),placeholder:"Enter bank name",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"accountNo",children:"Account Number"}),(0,a.jsx)(p.p,{id:"accountNo",value:s.newBankAccount?.accountNo||"",onChange:e=>C("bankAccounts",{newBankAccount:{...s.newBankAccount,accountNo:e.target.value}}),placeholder:"Enter account number",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"cost",children:"Balance (PKR)"}),(0,a.jsx)(p.p,{id:"cost",value:y(s.newBankAccount?.cost||""),onChange:e=>C("bankAccounts",{newBankAccount:{...s.newBankAccount,cost:j(e.target.value)}}),placeholder:"Enter balance",disabled:n})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:async()=>{let{bankName:e,accountNo:t,cost:a}=s.newBankAccount||{};if(!e||!t||!a){(0,es.oR)({title:"Error",description:"Please fill all required fields for bank account.",variant:"destructive"});return}if(isNaN(Number(a))){(0,es.oR)({title:"Error",description:"Balance must be a valid number.",variant:"destructive"});return}b("bankAccounts",!0);try{let n={...(await eY.saveBankAccount({userId:x,taxYear:g,bankName:e,accountNo:t,cost:Number(a)})).data,bankName:e,accountNo:t,cost:Number(a)},r=Array.isArray(s.bankAccounts)?[...s.bankAccounts]:[];C("bankAccounts",{bankAccounts:[...r,n],newBankAccount:{bankName:"",accountNo:"",cost:""}}),(0,es.oR)({title:"Success",description:"Bank account saved successfully to database."})}catch(e){(0,es.oR)({title:"Error",description:"Failed to save bank account. Please try again.",variant:"destructive"})}finally{b("bankAccounts",!1)}},disabled:n||!s.newBankAccount?.bankName||!s.newBankAccount?.accountNo||!s.newBankAccount?.cost,className:"w-full md:w-auto bg-green-600 hover:bg-green-700",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Bank Account"]})})})]}),s.bankAccounts&&s.bankAccounts.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Bank Accounts"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:s.bankAccounts.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-white relative group hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full bg-green-200 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C("bankAccounts",{bankAccounts:s.bankAccounts.filter((e,s)=>s!==t)})},children:(0,a.jsx)(eW.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"space-y-2 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.E,{variant:"outline",className:"text-xs",children:"Bank Account"}),e._id&&(0,a.jsx)(eI.E,{variant:"secondary",className:"text-xs",children:"Saved"})]}),(0,a.jsx)("div",{className:"font-medium text-sm",children:e.bankName}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Account No:"}),(0,a.jsx)("div",{className:"font-medium",children:e.accountNo})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Balance:"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["PKR ",e.cost.toLocaleString()]})]})]})]})]},t))}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Balance:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR"," ",s.bankAccounts.reduce((e,t)=>e+t.cost,0).toLocaleString()]})]})})]}):(0,a.jsx)("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"No bank accounts added yet"}),(0,a.jsx)("div",{className:"text-xs",children:"Add your first bank account using the form above"})]})})]});case"insurances":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50/50 animate-fade-in",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Add Insurance Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"companyName",children:"Company Name"}),(0,a.jsx)(p.p,{id:"companyName",value:s.newInsurance?.companyName||"",onChange:e=>C("insurances",{newInsurance:{...s.newInsurance,companyName:e.target.value}}),placeholder:"Enter company name",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(p.p,{id:"description",value:s.newInsurance?.description||"",onChange:e=>C("insurances",{newInsurance:{...s.newInsurance,description:e.target.value}}),placeholder:"Enter description",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"premiumPaid",children:"Premium Paid (PKR)"}),(0,a.jsx)(p.p,{id:"premiumPaid",value:y(s.newInsurance?.premiumPaid||""),onChange:e=>C("insurances",{newInsurance:{...s.newInsurance,premiumPaid:j(e.target.value)}}),placeholder:"Enter premium paid",disabled:n})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:async()=>{let{companyName:e,description:t,premiumPaid:a}=s.newInsurance||{};if(!e||!t||!a){(0,es.oR)({title:"Error",description:"Please fill all required fields for insurance.",variant:"destructive"});return}if(isNaN(Number(a))){(0,es.oR)({title:"Error",description:"Premium paid must be a valid number.",variant:"destructive"});return}b("insurances",!0);try{let n={...(await eY.saveInsurance({userId:x,taxYear:g,companyName:e,description:t,premiumPaid:Number(a)})).data,companyName:e,description:t,premiumPaid:Number(a)},r=Array.isArray(s.insurances)?[...s.insurances]:[];C("insurances",{insurances:[...r,n],newInsurance:{companyName:"",description:"",premiumPaid:""}}),(0,es.oR)({title:"Success",description:"Insurance saved successfully to database."})}catch(e){(0,es.oR)({title:"Error",description:"Failed to save insurance. Please try again.",variant:"destructive"})}finally{b("insurances",!1)}},disabled:n||!s.newInsurance?.companyName||!s.newInsurance?.description||!s.newInsurance?.premiumPaid,className:"w-full md:w-auto bg-green-600 hover:bg-green-700",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Insurance"]})})})]}),s.insurances&&s.insurances.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Insurances"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:s.insurances.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-white relative group hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full bg-green-200 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C("insurances",{insurances:s.insurances.filter((e,s)=>s!==t)})},children:(0,a.jsx)(eW.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"space-y-2 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.E,{variant:"outline",className:"text-xs",children:"Insurance"}),e._id&&(0,a.jsx)(eI.E,{variant:"secondary",className:"text-xs",children:"Saved"})]}),(0,a.jsx)("div",{className:"font-medium text-sm",children:e.companyName}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Description:"}),(0,a.jsx)("div",{className:"font-medium",children:e.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Premium:"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["PKR ",e.premiumPaid.toLocaleString()]})]})]})]})]},t))}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Premium Paid:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR"," ",s.insurances.reduce((e,t)=>e+t.premiumPaid,0).toLocaleString()]})]})})]}):(0,a.jsx)("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"No insurances added yet"}),(0,a.jsx)("div",{className:"text-xs",children:"Add your first insurance using the form above"})]})})]});case"possessions":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50/50 animate-fade-in",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Add Possession Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"possessionType",children:"Possession Type"}),(0,a.jsxs)(u.l6,{value:s.newPossession?.possessionType||"",onValueChange:e=>C("possessions",{newPossession:{...s.newPossession,possessionType:e}}),disabled:n,children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select type"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"jewelry",children:"Jewelry"}),(0,a.jsx)(u.eb,{value:"art",children:"Art"}),(0,a.jsx)(u.eb,{value:"antiques",children:"Antiques"}),(0,a.jsx)(u.eb,{value:"gold",children:"Gold"}),(0,a.jsx)(u.eb,{value:"other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(p.p,{id:"description",value:s.newPossession?.description||"",onChange:e=>C("possessions",{newPossession:{...s.newPossession,description:e.target.value}}),placeholder:"Enter description",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"cost",children:"Cost (PKR)"}),(0,a.jsx)(p.p,{id:"cost",value:y(s.newPossession?.cost||""),onChange:e=>C("possessions",{newPossession:{...s.newPossession,cost:j(e.target.value)}}),placeholder:"Enter cost",disabled:n})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:async()=>{let{possessionType:e,description:t,cost:a}=s.newPossession||{};if(!e||!t||!a){(0,es.oR)({title:"Error",description:"Please fill all required fields for possession.",variant:"destructive"});return}if(isNaN(Number(a))){(0,es.oR)({title:"Error",description:"Cost must be a valid number.",variant:"destructive"});return}b("possessions",!0);try{let n={...(await eY.savePossession({userId:x,taxYear:g,possessionType:e,description:t,cost:Number(a)})).data,possessionType:e,description:t,cost:Number(a)},r=Array.isArray(s.possessions)?[...s.possessions]:[];C("possessions",{possessions:[...r,n],newPossession:{possessionType:"",description:"",cost:""}}),(0,es.oR)({title:"Success",description:"Possession saved successfully to database."})}catch(e){(0,es.oR)({title:"Error",description:"Failed to save possession. Please try again.",variant:"destructive"})}finally{b("possessions",!1)}},disabled:n||!s.newPossession?.possessionType||!s.newPossession?.description||!s.newPossession?.cost,className:"w-full md:w-auto bg-green-600 hover:bg-green-700",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Possession"]})})})]}),s.possessions&&s.possessions.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Possessions"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:s.possessions.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-white relative group hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full bg-green-200 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C("possessions",{possessions:s.possessions.filter((e,s)=>s!==t)})},children:(0,a.jsx)(eW.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"space-y-2 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.E,{variant:"outline",className:"text-xs",children:e.possessionType}),e._id&&(0,a.jsx)(eI.E,{variant:"secondary",className:"text-xs",children:"Saved"})]}),(0,a.jsx)("div",{className:"font-medium text-sm",children:e.description}),(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Cost:"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["PKR ",e.cost.toLocaleString()]})]})]})]},t))}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Cost:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR"," ",s.possessions.reduce((e,t)=>e+t.cost,0).toLocaleString()]})]})})]}):(0,a.jsx)("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"No possessions added yet"}),(0,a.jsx)("div",{className:"text-xs",children:"Add your first possession using the form above"})]})})]});case"foreignAssets":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50/50 animate-fade-in",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Add Foreign Asset Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(p.p,{id:"description",value:s.newForeignAsset?.description||"",onChange:e=>C("foreignAssets",{newForeignAsset:{...s.newForeignAsset,description:e.target.value}}),placeholder:"Enter description",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"cost",children:"Cost (PKR)"}),(0,a.jsx)(p.p,{id:"cost",value:y(s.newForeignAsset?.cost||""),onChange:e=>C("foreignAssets",{newForeignAsset:{...s.newForeignAsset,cost:j(e.target.value)}}),placeholder:"Enter cost",disabled:n})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:async()=>{let{description:e,cost:t}=s.newForeignAsset||{};if(!e||!t){(0,es.oR)({title:"Error",description:"Please fill all required fields for foreign asset.",variant:"destructive"});return}if(isNaN(Number(t))){(0,es.oR)({title:"Error",description:"Cost must be a valid number.",variant:"destructive"});return}b("foreignAssets",!0);try{let a={...(await eY.saveForeignAsset({userId:x,taxYear:g,description:e,cost:Number(t)})).data,description:e,cost:Number(t)},n=Array.isArray(s.foreignAssets)?[...s.foreignAssets]:[];C("foreignAssets",{foreignAssets:[...n,a],newForeignAsset:{description:"",cost:""}}),(0,es.oR)({title:"Success",description:"Foreign asset saved successfully to database."})}catch(e){(0,es.oR)({title:"Error",description:"Failed to save foreign asset. Please try again.",variant:"destructive"})}finally{b("foreignAssets",!1)}},disabled:n||!s.newForeignAsset?.description||!s.newForeignAsset?.cost,className:"w-full md:w-auto bg-green-600 hover:bg-green-700",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Foreign Asset"]})})})]}),s.foreignAssets&&s.foreignAssets.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Foreign Assets"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:s.foreignAssets.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-white relative group hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full bg-green-200 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C("foreignAssets",{foreignAssets:s.foreignAssets.filter((e,s)=>s!==t)})},children:(0,a.jsx)(eW.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"space-y-2 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.E,{variant:"outline",className:"text-xs",children:"Foreign Asset"}),e._id&&(0,a.jsx)(eI.E,{variant:"secondary",className:"text-xs",children:"Saved"})]}),(0,a.jsx)("div",{className:"font-medium text-sm",children:e.description}),(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Cost:"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["PKR ",e.cost.toLocaleString()]})]})]})]},t))}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Cost:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR"," ",s.foreignAssets.reduce((e,t)=>e+t.cost,0).toLocaleString()]})]})})]}):(0,a.jsx)("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"No foreign assets added yet"}),(0,a.jsx)("div",{className:"text-xs",children:"Add your first foreign asset using the form above"})]})})]});case"cash":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50/50 animate-fade-in",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Add Cash Balance"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"balance",children:"Balance (PKR)"}),(0,a.jsx)(p.p,{id:"balance",value:y(s.newCash?.balance||""),onChange:e=>C("cash",{newCash:{balance:j(e.target.value)}}),placeholder:"Enter cash balance",disabled:n})]})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:async()=>{let{balance:e}=s.newCash||{};if(!e){(0,es.oR)({title:"Error",description:"Please enter cash balance.",variant:"destructive"});return}if(isNaN(Number(e))){(0,es.oR)({title:"Error",description:"Balance must be a valid number.",variant:"destructive"});return}b("cash",!0);try{let t={...(await eY.saveCash({userId:x,taxYear:g,balance:Number(e)})).data,balance:Number(e)};C("cash",{cash:t,newCash:{balance:""}}),(0,es.oR)({title:"Success",description:"Cash balance saved successfully to database."})}catch(e){(0,es.oR)({title:"Error",description:"Failed to save cash balance. Please try again.",variant:"destructive"})}finally{b("cash",!1)}},disabled:n||!s.newCash?.balance,className:"w-full md:w-auto bg-green-600 hover:bg-green-700",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Update Cash Balance"]})})})]}),s.cash&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Cash Balance"}),(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-white relative group hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full bg-green-200 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C("cash",{cash:void 0})},children:(0,a.jsx)(eW.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"space-y-2 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.E,{variant:"outline",className:"text-xs",children:"Cash"}),s.cash._id&&(0,a.jsx)(eI.E,{variant:"secondary",className:"text-xs",children:"Saved"})]}),(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Balance:"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["PKR ",s.cash.balance.toLocaleString()]})]})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Balance:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR ",s.cash.balance.toLocaleString()]})]})})]})]});case"otherAssets":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50/50 animate-fade-in",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Add Other Asset Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"transactionType",children:"Transaction Type"}),(0,a.jsxs)(u.l6,{value:s.newOtherAsset?.transactionType||"",onValueChange:e=>C("otherAssets",{newOtherAsset:{...s.newOtherAsset,transactionType:e}}),disabled:n,children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select type"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"stocks",children:"Stocks"}),(0,a.jsx)(u.eb,{value:"bonds",children:"Bonds"}),(0,a.jsx)(u.eb,{value:"crypto",children:"Cryptocurrency"}),(0,a.jsx)(u.eb,{value:"other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(p.p,{id:"description",value:s.newOtherAsset?.description||"",onChange:e=>C("otherAssets",{newOtherAsset:{...s.newOtherAsset,description:e.target.value}}),placeholder:"Enter description",disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"amount",children:"Amount (PKR)"}),(0,a.jsx)(p.p,{id:"amount",value:y(s.newOtherAsset?.amount||""),onChange:e=>C("otherAssets",{newOtherAsset:{...s.newOtherAsset,amount:j(e.target.value)}}),placeholder:"Enter amount",disabled:n})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.$,{onClick:async()=>{let{transactionType:e,description:t,amount:a}=s.newOtherAsset||{};if(!e||!t||!a){(0,es.oR)({title:"Error",description:"Please fill all required fields for other asset.",variant:"destructive"});return}if(isNaN(Number(a))){(0,es.oR)({title:"Error",description:"Amount must be a valid number.",variant:"destructive"});return}b("otherAssets",!0);try{let n={...(await eY.saveOtherAsset({userId:x,taxYear:g,transactionType:e,description:t,amount:Number(a)})).data,transactionType:e,description:t,amount:Number(a)},r=Array.isArray(s.otherAssets)?[...s.otherAssets]:[];C("otherAssets",{otherAssets:[...r,n],newOtherAsset:{transactionType:"",description:"",amount:""}}),(0,es.oR)({title:"Success",description:"Other asset saved successfully to database."})}catch(e){(0,es.oR)({title:"Error",description:"Failed to save other asset. Please try again.",variant:"destructive"})}finally{b("otherAssets",!1)}},disabled:n||!s.newOtherAsset?.transactionType||!s.newOtherAsset?.description||!s.newOtherAsset?.amount,className:"w-full md:w-auto bg-green-600 hover:bg-green-700",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Other Asset"]})})})]}),s.otherAssets&&s.otherAssets.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Other Assets"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:s.otherAssets.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-white relative group hover:shadow-md transition-shadow",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full bg-green-200 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C("otherAssets",{otherAssets:s.otherAssets.filter((e,s)=>s!==t)})},children:(0,a.jsx)(eW.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"space-y-2 pr-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.E,{variant:"outline",className:"text-xs",children:e.transactionType}),e._id&&(0,a.jsx)(eI.E,{variant:"secondary",className:"text-xs",children:"Saved"})]}),(0,a.jsx)("div",{className:"font-medium text-sm",children:e.description}),(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["PKR ",e.amount.toLocaleString()]})]})]})]},t))}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Amount:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR"," ",s.otherAssets.reduce((e,t)=>e+t.amount,0).toLocaleString()]})]})})]}):(0,a.jsx)("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm",children:"No other assets added yet"}),(0,a.jsx)("div",{className:"text-xs",children:"Add your first other asset using the form above"})]})})]});default:return(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{children:"Asset type implementation in progress..."})})}})(w)})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between px-4",children:[(0,a.jsxs)(o.$,{variant:"outline",onClick:()=>{s>0&&n(s-1)},disabled:0===s,className:"flex items-center bg-transparent",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Previous Asset"]}),(0,a.jsxs)(o.$,{onClick:()=>{s<N.length-1&&n(s+1)},disabled:s===N.length-1,className:"flex items-center",children:["Next Asset",(0,a.jsx)(m.A,{className:"h-4 w-4 ml-2"})]})]})]})]})}function eJ({formData:e,handleInputChange:t}){let[s,n]=(0,i.useState)({bankName:"",outstandingLoan:""}),[r,l]=(0,i.useState)({liabilityType:"",amount:"",description:""}),d="64fd06ddc7a225c86e8f2345",h="2024-2025",m=e=>{let t=e.replace(/[^\d]/g,"");return t?Number.parseInt(t).toLocaleString():""},x=e=>e.replace(/[^\d]/g,""),g=async()=>{if(!s.bankName||!s.outstandingLoan)return(0,es.oR)({title:"Error",description:"Please fill all required fields for bank loan.",variant:"destructive"});let a={userId:d,taxYear:h,bankName:s.bankName,outstandingLoan:Number(s.outstandingLoan)};try{let s=await fetch("http://localhost:5000/api/liabilities/bank-loan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await s.json();if(s.ok){let s={...e.wealthStatement.liabilities,bankLoans:[...e.wealthStatement.liabilities.bankLoans||[],a]};t("wealthStatement",{...e.wealthStatement,liabilities:s}),n({bankName:"",outstandingLoan:""}),(0,es.oR)({title:"Success",description:"Bank loan saved successfully."})}else(0,es.oR)({title:"API Error",description:r.message||"Failed to save bank loan.",variant:"destructive"})}catch(e){(0,es.oR)({title:"Error",description:"Network error while saving bank loan.",variant:"destructive"})}},b=async()=>{if(!r.liabilityType||!r.amount||!r.description)return(0,es.oR)({title:"Error",description:"Please fill all required fields for other liability.",variant:"destructive"});let s={userId:d,taxYear:h,liabilityType:r.liabilityType,amount:Number(r.amount),description:r.description};try{let a=await fetch("http://localhost:5000/api/liabilities/other-liability",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await a.json();if(a.ok){let a={...e.wealthStatement.liabilities,otherLiabilities:[...e.wealthStatement.liabilities.otherLiabilities||[],s]};t("wealthStatement",{...e.wealthStatement,liabilities:a}),l({liabilityType:"",amount:"",description:""}),(0,es.oR)({title:"Success",description:"Other liability saved successfully."})}else(0,es.oR)({title:"API Error",description:n.message||"Failed to save other liability.",variant:"destructive"})}catch(e){(0,es.oR)({title:"Error",description:"Network error while saving other liability.",variant:"destructive"})}},y=s=>{let a=e.wealthStatement.liabilities.bankLoans?.filter((e,t)=>t!==s)||[];t("wealthStatement",{...e.wealthStatement,liabilities:{...e.wealthStatement.liabilities,bankLoans:a}})},j=s=>{let a=e.wealthStatement.liabilities.otherLiabilities?.filter((e,t)=>t!==s)||[];t("wealthStatement",{...e.wealthStatement,liabilities:{...e.wealthStatement.liabilities,otherLiabilities:a}})};return(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"Liabilities"})}),(0,a.jsxs)(c.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Add Bank Loan"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"bankName",children:"Bank Name"}),(0,a.jsx)(p.p,{id:"bankName",value:s.bankName,onChange:e=>n({...s,bankName:e.target.value}),placeholder:"Enter bank name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"outstandingLoan",children:"Outstanding Loan (PKR)"}),(0,a.jsx)(p.p,{id:"outstandingLoan",value:m(s.outstandingLoan),onChange:e=>n({...s,outstandingLoan:x(e.target.value)}),placeholder:"Enter loan amount"})]})]}),(0,a.jsxs)(o.$,{onClick:g,className:"w-full md:w-auto",children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Bank Loan"]})]}),(e.wealthStatement.liabilities.bankLoans?.length??0)>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Bank Loans"}),e.wealthStatement.liabilities.bankLoans?.map((e,t)=>a.jsxs("div",{className:"flex justify-between items-center border p-2 rounded",children:[a.jsxs("div",{children:[a.jsx("div",{children:e.bankName}),a.jsxs("div",{children:["PKR ",e.outstandingLoan.toLocaleString()]})]}),a.jsx(o.$,{variant:"ghost",onClick:()=>y(t),children:a.jsx(eW.A,{className:"w-4 h-4"})})]},t))]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Add Other Liability"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"liabilityType",children:"Liability Type"}),(0,a.jsxs)(u.l6,{value:r.liabilityType,onValueChange:e=>l({...r,liabilityType:e}),children:[(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select type"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"personal_loan",children:"Personal Loan"}),(0,a.jsx)(u.eb,{value:"credit_card",children:"Credit Card"}),(0,a.jsx)(u.eb,{value:"mortgage",children:"Mortgage"}),(0,a.jsx)(u.eb,{value:"business_credit",children:"Business Credit"}),(0,a.jsx)(u.eb,{value:"other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"amount",children:"Amount (PKR)"}),(0,a.jsx)(p.p,{id:"amount",value:m(r.amount),onChange:e=>l({...r,amount:x(e.target.value)}),placeholder:"Enter amount"})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(f.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(p.p,{id:"description",value:r.description,onChange:e=>l({...r,description:e.target.value}),placeholder:"Enter description"})]})]}),(0,a.jsxs)(o.$,{onClick:b,className:"w-full md:w-auto",children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"Add Other Liability"]})]}),(e.wealthStatement.liabilities.otherLiabilities?.length??0)>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Added Other Liabilities"}),e.wealthStatement.liabilities.otherLiabilities?.map((e,t)=>a.jsxs("div",{className:"flex justify-between items-center border p-2 rounded",children:[a.jsxs("div",{children:[a.jsx("div",{children:e.liabilityType}),a.jsxs("div",{children:["PKR ",e.amount.toLocaleString()]}),a.jsx("div",{children:e.description})]}),a.jsx(o.$,{variant:"ghost",onClick:()=>j(t),children:a.jsx(eW.A,{className:"w-4 h-4"})})]},t))]})]})]})}var eV=s(35071);function eH({formData:e,handleInputChange:t,onNavigateNext:s}){let{toast:n}=(0,es.dj)(),[r,l]=(0,i.useState)({donations:"",pensionFund:"",tuitionFees:""}),[h,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(void 0!==e.taxCredits),[b,y]=(0,i.useState)("none"!==e.taxCredits&&void 0!==e.taxCredits),j={donations:e.taxCredits?.donations||{enabled:!1,taxCreditAmount:""},pensionFund:e.taxCredits?.pensionFund||{enabled:!1,taxCreditAmount:""},tuitionFees:e.taxCredits?.tuitionFees||{enabled:!1,taxCreditAmount:""}},v=e=>{x(!0),e?(y(!0),t("taxCredits",{donations:{enabled:!1,taxCreditAmount:""},pensionFund:{enabled:!1,taxCreditAmount:""},tuitionFees:{enabled:!1,taxCreditAmount:""}})):(y(!1),t("taxCredits","none"),A())},N=(e,s)=>{t("taxCredits",{...j,[e]:{enabled:s,taxCreditAmount:s?j[e].taxCreditAmount:""}}),s||l(t=>({...t,[e]:""}))},w=(e,s)=>{let a=""===s?"":Number(s),n="";j[e].enabled&&(""===a||isNaN(a)||a<=0)&&(n="Amount must be greater than 0"),l(t=>({...t,[e]:n})),t("taxCredits",{...j,[e]:{...j[e],taxCreditAmount:a}})},k=()=>{let e={...r};return Object.keys(j).forEach(t=>{if(j[t].enabled){let s=j[t].taxCreditAmount;""===s||isNaN(Number(s))?e[t]="Please enter a valid amount":0>=Number(s)&&(e[t]="Amount must be greater than 0")}}),l(e),!Object.values(e).some(e=>""!==e)},A=()=>{if(b&&!k()){n({title:"Validation Error",description:"Please fix all errors before continuing",variant:"destructive"});return}s()},C=async()=>{if(m(!0),!k()){m(!1);return}try{let t=eg.A.get("token");if(!t)throw Error("Authentication token missing");let s={userId:e.userId,taxYear:e.taxYear,donationAmount:j.donations.enabled?Number(j.donations.taxCreditAmount):0,pensionFundInvestment:j.pensionFund.enabled?Number(j.pensionFund.taxCreditAmount):0,tuitionFee:j.tuitionFees.enabled?Number(j.tuitionFees.taxCreditAmount):0},a=await fetch("http://localhost:5000/api/tax-credit/tax-credit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to save tax credits")}n({title:"Success",description:"Tax credits saved successfully"}),A()}catch(e){console.error("Submission error:",e),n({title:"Error",description:e instanceof Error?e.message:"Failed to save tax credits",variant:"destructive"})}finally{m(!1)}},S=Object.values(j).reduce((e,t)=>e+(t.enabled&&t.taxCreditAmount?Number(t.taxCreditAmount):0),0);return u?b?(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-lg",children:"Tax Credits"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Specify any applicable tax credits for donations, pension funds, or tuition fees."})]}),(0,a.jsxs)(c.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,a.jsx)(f.J,{className:"w-[500px] text-right text-lg font-medium",children:"Have you given any donations through crossed cheque to any approved charity institutions?"}),(0,a.jsx)(g.S,{id:"donations",checked:j.donations.enabled,onCheckedChange:e=>N("donations",e),className:"border-green-700 text-green-700"}),(0,a.jsx)(p.p,{id:"donationsAmount",type:"number",min:"0",value:j.donations.taxCreditAmount,onChange:e=>w("donations",e.target.value),placeholder:"Enter amount",className:"ml-2",disabled:!j.donations.enabled})]}),r.donations&&(0,a.jsx)("p",{className:"text-red-500 text-sm text-center",children:r.donations})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,a.jsx)(f.J,{className:"w-[500px] text-right text-lg font-medium",children:"Have you made any investment in approved pension funds?"}),(0,a.jsx)(g.S,{id:"pensionFund",checked:j.pensionFund.enabled,onCheckedChange:e=>N("pensionFund",e),className:"border-green-700 text-green-700"}),(0,a.jsx)(p.p,{id:"pensionFundAmount",type:"number",min:"0",value:j.pensionFund.taxCreditAmount,onChange:e=>w("pensionFund",e.target.value),placeholder:"Enter amount",className:"ml-2",disabled:!j.pensionFund.enabled})]}),r.pensionFund&&(0,a.jsx)("p",{className:"text-red-500 text-sm text-center",children:r.pensionFund})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,a.jsx)(f.J,{className:"w-[500px] text-right text-lg font-medium",children:"Have you paid any tuition fees for higher education?"}),(0,a.jsx)(g.S,{id:"tuitionFees",checked:j.tuitionFees.enabled,onCheckedChange:e=>N("tuitionFees",e),className:"border-green-700 text-green-700"}),(0,a.jsx)(p.p,{id:"tuitionFeesAmount",type:"number",min:"0",value:j.tuitionFees.taxCreditAmount,onChange:e=>w("tuitionFees",e.target.value),placeholder:"Enter amount",className:"ml-2",disabled:!j.tuitionFees.enabled})]}),r.tuitionFees&&(0,a.jsx)("p",{className:"text-red-500 text-sm text-center",children:r.tuitionFees})]}),S>0&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-muted-foreground/10 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Tax Credits:"}),(0,a.jsxs)("span",{className:"font-semibold text-lg",children:["PKR ",S.toLocaleString()]})]})}),(0,a.jsx)("div",{className:"flex justify-end gap-4 mt-6",children:(0,a.jsx)(o.$,{onClick:C,disabled:h,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save & Continue"})})]})]}):null:(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-2xl",children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-center text-xl",children:"Tax Credits"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsx)("p",{className:"text-lg",children:"Do you have any tax credits to claim?"}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsxs)(o.$,{onClick:()=>v(!0),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-2",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 mr-2"}),"Yes"]}),(0,a.jsxs)(o.$,{onClick:()=>v(!1),variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50 px-8 py-2",children:[(0,a.jsx)(eV.A,{className:"w-5 h-5 mr-2"}),"No"]})]})]})})]})})}function eK({formData:e,handleInputChange:t}){let[s,n]=(0,i.useState)(!1),[r,l]=(0,i.useState)(!1),c=[{label:"Rent",key:"rent"},{label:"Vehicle Running/Maintenance",key:"vehicle"},{label:"Electricity",key:"electricity"},{label:"Gas",key:"gas"},{label:"Medical",key:"medical"},{label:"Functions / Gatherings",key:"functions"},{label:"Insurance Premium",key:"insurance"},{label:"Interest Expense",key:"interest"},{label:"Traveling",key:"traveling"},{label:"Rates/ Taxes/ Charge/ Cess",key:"rates"},{label:"Income Tax",key:"incomeTax"},{label:"Water",key:"water"},{label:"Telephone",key:"telephone"},{label:"Educational",key:"educational"},{label:"Donations/Zakat/Annuity, Profit",key:"donations"},{label:"Personal/Household Expense",key:"personal"},{label:"Gift",key:"gift"}],d=c.slice(0,9),h=c.slice(9),m=async()=>{l(!0);let t=e.advancedExpense||{},s={userId:"64fd06ddc7a225c86e8f2345",taxYear:"2024-2025",rent:parseInt(t.rent||"0"),vehicleMaintenance:parseInt(t.vehicle||"0"),electricity:parseInt(t.electricity||"0"),gas:parseInt(t.gas||"0"),medical:parseInt(t.medical||"0"),functions:parseInt(t.functions||"0"),insurancePremium:parseInt(t.insurance||"0"),interestExpense:parseInt(t.interest||"0"),traveling:parseInt(t.traveling||"0"),ratesTaxes:parseInt(t.rates||"0"),incomeTax:parseInt(t.incomeTax||"0"),water:parseInt(t.water||"0"),telephone:parseInt(t.telephone||"0"),educational:parseInt(t.educational||"0"),donations:parseInt(t.donations||"0"),personalExpense:parseInt(t.personal||"0")};try{let e=await fetch("http://localhost:5000/api/expense/expense",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok)throw Error(`Error ${e.status}: ${e.statusText}`);let t=await e.json();alert(" Expense data submitted successfully!"),console.log("API response:",t)}catch(e){console.error("Expense API Error:",e),alert(" Failed to submit expense data. Check console for details.")}finally{l(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col items-center w-full mt-8",children:[(0,a.jsx)("div",{className:"mb-2 mt-4",children:(0,a.jsx)("span",{className:"inline-block mb-2",children:(0,a.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"8",y:"24",width:"48",height:"24",rx:"8",fill:"#f87171"}),(0,a.jsx)("rect",{x:"16",y:"16",width:"32",height:"16",rx:"4",fill:"#2563eb"}),(0,a.jsx)("rect",{x:"24",y:"40",width:"16",height:"8",rx:"2",fill:"#fde68a"}),(0,a.jsx)("circle",{cx:"20",cy:"52",r:"6",fill:"#2563eb"}),(0,a.jsx)("circle",{cx:"44",cy:"52",r:"6",fill:"#2563eb"})]})})}),(0,a.jsx)("div",{className:"text-3xl font-bold text-center mb-2",children:"Expense"}),(0,a.jsx)("div",{className:"text-center mb-4",children:(0,a.jsx)("span",{className:"font-bold underline text-[#15803d] text-lg cursor-pointer",onClick:()=>n(!s),children:s?"click here for basic options":"click here for advance options"})}),s?(0,a.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-16 gap-y-4 w-full max-w-5xl",children:[(0,a.jsx)("div",{className:"flex flex-col gap-4",children:d.map(s=>(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-56 text-right text-lg font-medium",children:s.label}),(0,a.jsx)(p.p,{value:e.advancedExpense?.[s.key]||"",onChange:a=>t("advancedExpense",{...e.advancedExpense,[s.key]:a.target.value}),placeholder:"Enter amount here"})]},s.key))}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:h.map(s=>(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"w-56 text-right text-lg font-medium",children:s.label}),(0,a.jsx)(p.p,{value:e.advancedExpense?.[s.key]||"",onChange:a=>t("advancedExpense",{...e.advancedExpense,[s.key]:a.target.value}),placeholder:"Enter amount here",readOnly:"incomeTax"===s.key})]},s.key))})]})}):(0,a.jsx)("div",{className:"flex flex-col items-center w-full mt-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"text-lg font-medium",children:"Total Household Expenses"}),(0,a.jsx)(p.p,{className:"text-2xl px-6 py-4 text-center border-2 border-blue-200 focus:border-blue-400 max-w-xs",value:e.expense?.householdExpenses||"",onChange:s=>t("expense",{...e.expense,householdExpenses:s.target.value}),placeholder:"Enter amount here"})]})}),s&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(o.$,{onClick:m,disabled:r,children:r?"Submitting...":"Submit Expenses"})})]})}function eG({formData:e}){let t;let s=(()=>{let t=0;if(e?.salaryIncome&&"object"==typeof e.salaryIncome&&e.salaryIncome.taxDeducted?t+=Number(e.salaryIncome.taxDeducted)||0:e?.salaryIncome&&isNaN(Number(e.salaryIncome)),e?.businessIncome&&"object"==typeof e.businessIncome&&e.businessIncome.taxDeducted&&(t+=Number(e.businessIncome.taxDeducted)||0),e?.rentalIncome&&"object"==typeof e.rentalIncome&&e.rentalIncome.taxDeducted&&(t+=Number(e.rentalIncome.taxDeducted)||0),e?.otherIncome&&"object"==typeof e.otherIncome&&e.otherIncome.taxDeducted&&(t+=Number(e.otherIncome.taxDeducted)||0),Array.isArray(e?.incomes))for(let s of e.incomes)s.details&&s.details.taxDeducted&&(t+=Number(s.details.taxDeducted)||0);return t})()+(t=0,e?.deductionDetails?.bankTransactions&&(t+=e.deductionDetails.bankTransactions.reduce((e,t)=>e+(Number(t.taxDeducted)||0),0)),e?.deductionDetails?.utilities&&(t+=e.deductionDetails.utilities.reduce((e,t)=>e+(Number(t.taxDeducted)||0),0)),e?.deductionDetails?.vehicles&&(t+=e.deductionDetails.vehicles.reduce((e,t)=>e+(Number(t.taxDeducted)||0),0)),e?.deductionDetails?.other&&(t+=Object.values(e.deductionDetails.other).reduce((e,t)=>e+(Number(t)||0),0)),t),n=[e?.salaryIncome&&"object"!=typeof e.salaryIncome?e.salaryIncome:0,e?.businessIncome&&"object"!=typeof e.businessIncome?e.businessIncome:0,e?.rentalIncome&&"object"!=typeof e.rentalIncome?e.rentalIncome:0,e?.otherIncome&&"object"!=typeof e.otherIncome?e.otherIncome:0].reduce((e,t)=>e+("number"==typeof t?t:Number(t)||0),0),r=Number(e?.expense?.householdExpenses)||0,i=0,l=e?.wealthStatement?.liabilities||{};l.bankLoans&&(i+=l.bankLoans.reduce((e,t)=>e+(Number(t.outstandingLoan)||0),0)),l.otherLiabilities&&(i+=l.otherLiabilities.reduce((e,t)=>e+(Number(t.amount)||0),0));let c=e?.wealthStatement?.assets||{},o=0;c.properties&&(o+=c.properties.reduce((e,t)=>e+(Number(t.cost)||0),0)),c.vehicles&&(o+=c.vehicles.reduce((e,t)=>e+(Number(t.cost)||0),0)),c.bankAccounts&&(o+=c.bankAccounts.reduce((e,t)=>e+(Number(t.cost)||0),0)),c.insurances&&(o+=c.insurances.reduce((e,t)=>e+(Number(t.premiumPaid)||0),0)),c.possessions&&(o+=c.possessions.reduce((e,t)=>e+(Number(t.cost)||0),0)),c.foreignAssets&&(o+=c.foreignAssets.reduce((e,t)=>e+(Number(t.cost)||0),0)),c.cash&&(o+=Number(c.cash.balance)||0),c.otherAssets&&(o+=c.otherAssets.reduce((e,t)=>e+(Number(t.amount)||0),0));let d=e?.wealthStatement?.assets||{},h=0;d.properties&&(h+=d.properties.reduce((e,t)=>e+(Number(t.cost)||0),0)),d.vehicles&&(h+=d.vehicles.reduce((e,t)=>e+(Number(t.cost)||0),0)),d.bankAccounts&&(h+=d.bankAccounts.reduce((e,t)=>e+(Number(t.cost)||0),0)),d.insurances&&(h+=d.insurances.reduce((e,t)=>e+(Number(t.premiumPaid)||0),0)),d.possessions&&(h+=d.possessions.reduce((e,t)=>e+(Number(t.cost)||0),0)),d.foreignAssets&&(h+=d.foreignAssets.reduce((e,t)=>e+(Number(t.cost)||0),0)),d.cash&&(h+=Number(d.cash.balance)||0),d.otherAssets&&(h+=d.otherAssets.reduce((e,t)=>e+(Number(t.amount)||0),0));let m=o+n-r+h-i-s,u=e=>isNaN(e)?"0":e.toLocaleString();return(0,a.jsxs)("aside",{className:"bg-[#232323] text-white w-72 min-h-screen sticky top-0 p-4 flex flex-col gap-4",style:{fontFamily:"inherit"},children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-2 tracking-widest",children:"INCOME TAX"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 border-b border-gray-700 pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-semibold",children:" TAX PAID"}),(0,a.jsx)("span",{children:u(s)})]}),e?.deductionDetails?.bankTransactions&&e.deductionDetails.bankTransactions.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-300 pl-4",children:[(0,a.jsx)("span",{children:"Bank Transaction"}),(0,a.jsx)("span",{children:u(e.deductionDetails.bankTransactions.reduce((e,t)=>e+(Number(t.taxDeducted)||0),0))})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-700 pb-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"REFUNDABLE"}),(0,a.jsx)("span",{children:u(s)})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-4 mb-2 tracking-widest",children:"WEALTH RECONCILIATION"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 border-b border-gray-700 pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-semibold",children:"OPENING WEALTH"}),(0,a.jsx)("span",{children:u(o)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-semibold",children:"TAX PAID"}),(0,a.jsx)("span",{children:u(s)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-semibold",children:"CLOSING WEALTH"}),(0,a.jsx)("span",{children:u(m)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-semibold",children:"DIFFERENCE"}),(0,a.jsx)("span",{children:u(m-o)})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"+ ASSETS AT CLOSING"}),(0,a.jsx)("span",{children:u(h)})]})]})}var eU=s(66147);let e_=[{key:"personal",label:"Personal Information"},{key:"income",label:"All income"},{key:"taxCredit",label:"Tax credit"},{key:"taxDeducted",label:"Tax deducted"},{key:"wealth",label:"Wealth statement"},{key:"expense",label:"Expense"},{key:"apiData",label:"API Data"}];function eZ({formData:e,onBack:t,onContinue:s,taxFilingData:n}){let[r,l]=(0,i.useState)("personal"),c=e=>isNaN(Number(e))?"":Number(e).toLocaleString(),o={fullName:n?.user?.fullName||e.fullName||"",cnic:n?.user?.cnic||e.cnic||"",email:n?.user?.email||e.email||"",dob:n?.personalInfo?.dateOfBirth?new Date(n.personalInfo.dateOfBirth).toLocaleDateString():e.dateOfBirth?"string"==typeof e.dateOfBirth?e.dateOfBirth:e.dateOfBirth.toLocaleDateString():"",mobile:n?.user?.phone||e.mobile||"",occupation:n?.personalInfo?.occupation||e.occupation||"",nationality:n?.personalInfo?.nationality||e.nationality||"",resident:n?.personalInfo?.residentialStatus||e.residentialStatus||""},d=n?.incomeDetails?.salaryIncome?.annualSalary||e?.salaryIncome||0,h=n?.incomeDetails?.businessIncome||e?.businessIncome||0,m=n?.incomeDetails?.freelancerIncome?.totalEarnings||e?.rentalIncome||0,u=e?.otherIncome||0,x=n?.taxCredits?[{type:"Donation",amount:n.taxCredits.donationAmount||0,details:"Charitable contribution"},{type:"Pension Fund",amount:n.taxCredits.pensionFundInvestment||0,details:"Investment in pension fund"},{type:"Tuition Fee",amount:n.taxCredits.tuitionFee||0,details:"Educational expenses"}].filter(e=>e.amount>0):[],p=n?.deductions||{bankTransactions:[],utilityDeductions:[],vehicleDeductions:[],otherDeductions:{}},f=n?.wealth?.assets||e?.wealthStatement?.assets||{},g=f.vehicleAssets||f.vehicles||[],b=f.propertyAssets||f.properties||[],y=f.bankAccountAssets||f.bankAccounts||[],j=n?.liabilitiesAndExpenses?.expenses||e?.expense||{};return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto mt-8 mb-12",children:[(0,a.jsx)("div",{className:"flex gap-8 justify-center border-b border-gray-300 mb-6",children:e_.map(e=>(0,a.jsx)("button",{className:`pb-2 text-lg font-medium ${r===e.key?"border-b-2 border-red-700 text-red-700":"text-black hover:text-red-700"}`,onClick:()=>l(e.key),children:e.label},e.key))}),"personal"===r&&(0,a.jsx)("div",{className:"bg-white rounded shadow p-0 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:2,children:"PERSONAL INFORMATION"})})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Full Name"}),(0,a.jsx)("td",{className:"px-6 py-2",children:o.fullName||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"CNIC No."}),(0,a.jsx)("td",{className:"px-6 py-2",children:o.cnic||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Email"}),(0,a.jsx)("td",{className:"px-6 py-2",children:o.email||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Date of Birth"}),(0,a.jsx)("td",{className:"px-6 py-2",children:o.dob||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Mobile No."}),(0,a.jsx)("td",{className:"px-6 py-2",children:o.mobile||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Occupation"}),(0,a.jsx)("td",{className:"px-6 py-2",children:o.occupation||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Nationality"}),(0,a.jsx)("td",{className:"px-6 py-2",children:o.nationality||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Resident"}),(0,a.jsx)("td",{className:"px-6 py-2",children:o.resident||"N/A"})]})]})]})}),"income"===r&&(0,a.jsx)("div",{className:"bg-white rounded shadow p-0 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:4,children:"INCOME SOURCES"})})}),(0,a.jsxs)("tbody",{children:[d?(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Salary"}),(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:c(d)})]}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-2",colSpan:4,children:"No salary data"})}),h?(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Business"}),(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:c(h)})]}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-2",colSpan:4,children:"No business data"})}),m?(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Freelancer"}),(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:c(m)})]}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-2",colSpan:4,children:"No freelancer data"})}),u?(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Other"}),(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:c(u)})]}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-2",colSpan:4,children:"No other income data"})})]})]})}),"taxCredit"===r&&(0,a.jsx)("div",{className:"bg-white rounded shadow p-0 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:3,children:"TAX CREDIT"})})}),(0,a.jsxs)("tbody",{children:[0===x.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:"No tax credits claimed."})}),x.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:e.type}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(e.amount)}),(0,a.jsx)("td",{className:"px-6 py-2",children:e.details})]},t))]})]})}),"taxDeducted"===r&&(0,a.jsx)("div",{className:"bg-white rounded shadow p-0 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:4,children:"TAX DEDUCTED"})})}),(0,a.jsxs)("tbody",{children:[p.bankTransactions?.length>0&&(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Bank Transactions"}),(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:p.bankTransactions.map((e,t)=>`${e.bankName} (${e.accountNumber}): ${c(e.taxDeducted)}`).join(", ")})]}),p.utilityDeductions?.length>0&&(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Utilities"}),(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:p.utilityDeductions.map((e,t)=>`${e.provider} (${e.consumerNumber}): ${c(e.taxDeducted)}`).join(", ")})]}),p.vehicleDeductions?.length>0&&(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Vehicles"}),(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:p.vehicleDeductions.map((e,t)=>`${e.registrationNumber}: ${c(e.taxDeducted)}`).join(", ")})]}),p.otherDeductions&&Object.keys(p.otherDeductions).length>0&&(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Other"}),(0,a.jsx)("td",{className:"px-6 py-2",colSpan:3,children:Object.entries(p.otherDeductions).map(([e,t])=>"_id"!==e&&"userId"!==e&&"taxYear"!==e&&"createdAt"!==e&&"updatedAt"!==e&&"__v"!==e?`${e}: ${c(t)}`:null).filter(Boolean).join(", ")})]}),!p.bankTransactions?.length&&!p.utilityDeductions?.length&&!p.vehicleDeductions?.length&&!p.otherDeductions&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-2",colSpan:4,children:"No tax deducted entries."})})]})]})}),"wealth"===r&&(0,a.jsxs)("div",{className:"bg-white rounded shadow p-0 overflow-x-auto",children:[g.length>0&&(0,a.jsxs)("table",{className:"min-w-full mb-6",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:3,children:"VEHICLES"})})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"VEHICLE TYPE"}),(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"REGISTRATION NO."}),(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"COST"})]}),g.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-2",children:e.vehicleType||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-2",children:e.registrationNumber||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(e.cost)})]},t))]})]}),b.length>0&&(0,a.jsxs)("table",{className:"min-w-full mb-6",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:3,children:"PROPERTIES"})})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"TYPE"}),(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"LOCATION"}),(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"COST"})]}),b.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-2",children:e.propertyType||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-2",children:e.address||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(e.cost)})]},t))]})]}),y.length>0&&(0,a.jsxs)("table",{className:"min-w-full mb-6",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:3,children:"BANK ACCOUNTS"})})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"BANK NAME"}),(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"ACCOUNT NO."}),(0,a.jsx)("th",{className:"font-semibold px-6 py-2",children:"BALANCE"})]}),y.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-2",children:e.bankName||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-2",children:e.accountNumber||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(e.balance)})]},t))]})]})]}),"expense"===r&&(0,a.jsx)("div",{className:"bg-white rounded shadow p-0 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:2,children:"EXPENSES"})})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Total Household Expenses"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(j.totalHouseholdExpense)||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Rent"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(j.rent)||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Electricity"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(j.electricity)||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Gas"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(j.gas)||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Medical"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(j.medical)||"N/A"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Educational"}),(0,a.jsx)("td",{className:"px-6 py-2",children:c(j.educational)||"N/A"})]})]})]})}),"apiData"===r&&(0,a.jsx)("div",{className:"bg-white rounded shadow p-0 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{className:"text-left px-6 py-3 bg-gray-100",colSpan:2,children:"API DATA SUMMARY"})})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"User Data"}),(0,a.jsx)("td",{className:"px-6 py-2",children:n?.user?`Name: ${n.user.fullName}, Email: ${n.user.email}, Phone: ${n.user.phone}`:"No user data available"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Income Sources"}),(0,a.jsx)("td",{className:"px-6 py-2",children:n?.incomeSources?.selectedSources?n.incomeSources.selectedSources.join(", "):"No income sources"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Tax Credits"}),(0,a.jsx)("td",{className:"px-6 py-2",children:n?.taxCredits?`Donation: ${c(n.taxCredits.donationAmount)}, Pension Fund: ${c(n.taxCredits.pensionFundInvestment)}, Tuition Fee: ${c(n.taxCredits.tuitionFee)}`:"No tax credit data"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Assets"}),(0,a.jsx)("td",{className:"px-6 py-2",children:n?.wealth?.assets?`Properties: ${n.wealth.assets.propertyAssets?.length||0}, Vehicles: ${n.wealth.assets.vehicleAssets?.length||0}, Bank Accounts: ${n.wealth.assets.bankAccountAssets?.length||0}`:"No asset data"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-semibold px-6 py-2",children:"Available Services"}),(0,a.jsx)("td",{className:"px-6 py-2",children:n?.availableServices&&n.availableServices.length>0?n.availableServices.map((e,t)=>`${e.category}: ${e.services.length} services`).join(", "):"No services available"})]})]})]})}),(0,a.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-blue-500 text-white font-semibold text-lg shadow hover:bg-blue-600 transition",onClick:t,children:"Back"}),(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-red-600 text-white font-semibold text-lg shadow hover:bg-red-700 transition",onClick:s,children:"Continue"})]})]})}function eX({formData:e,handleInputChange:t}){let[s,n]=(0,i.useState)(e),[r,c]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[g,b]=(0,i.useState)([null,null]),[y,j]=(0,i.useState)(""),[v,N]=(0,i.useState)(""),[w,k]=(0,i.useState)(null),[A,C]=(0,i.useState)(!1),[S,P]=(0,i.useState)(null),I=(0,l.useRouter)(),T=(0,l.useParams)();T?.id;let E=eg.A.get("token")||eg.A.get("authToken")||"";eg.A.get("userId");let D=eg.A.get("taxYear")||"2024",F=(()=>{let e=w?.wealth?.assets||s?.wealthStatement?.assets||{},t=0;return e.propertyAssets&&(t+=e.propertyAssets.reduce((e,t)=>e+(Number(t.cost)||0),0)),e.vehicleAssets&&(t+=e.vehicleAssets.reduce((e,t)=>e+(Number(t.cost)||0),0)),e.bankAccountAssets&&(t+=e.bankAccountAssets.reduce((e,t)=>e+(Number(t.balance)||0),0)),e.cashAsset&&(t+=Number(e.cashAsset.balance)||0),e.properties&&(t+=e.properties.reduce((e,t)=>e+(Number(t.cost)||0),0)),e.vehicles&&(t+=e.vehicles.reduce((e,t)=>e+(Number(t.cost)||0),0)),e.bankAccounts&&(t+=e.bankAccounts.reduce((e,t)=>e+(Number(t.balance)||0),0)),e.cash&&(t+=Number(e.cash.balance)||0),Math.abs(t-(w?.wealth?.openingWealth?.openingWealth||0)-(w?.liabilitiesAndExpenses?.expenses?.totalHouseholdExpense||0))})(),B=async()=>{try{C(!0),P(null);let e={"Content-Type":"application/json"};E&&(e.Authorization=`Bearer ${E}`);let t={taxYear:D,filingType:"individual",personalInfo:{fullName:w?.user?.fullName||s.fullName,email:w?.user?.email||s.email,cnic:w?.user?.cnic||s.cnic,dateOfBirth:s.dateOfBirth,nationality:s.nationality||"Pakistani",residentialStatus:s.residentialStatus||"Resident",occupation:s.occupation,family:s.family||{}},incomeSources:{selectedSources:w?.incomeSources?.selectedSources||s.incomeSources||[]},incomeDetails:{salaryIncome:w?.incomeDetails?.salaryIncome||s.salaryIncome||{},freelancerIncome:w?.incomeDetails?.freelancerIncome||s.freelancerIncome||{},businessIncome:w?.incomeDetails?.businessIncome||s.businessIncome||{}},taxCredits:{donationAmount:w?.taxCredits?.donationAmount||0,pensionFundInvestment:w?.taxCredits?.pensionFundInvestment||0,tuitionFee:w?.taxCredits?.tuitionFee||0},openingWealth:{openingWealth:w?.wealth?.openingWealth?.openingWealth||0},assetSelection:w?.wealth?.assetSelection||s.assetSelection||{},assetDetails:{propertyAssets:w?.wealth?.assets?.propertyAssets||[],vehicleAssets:w?.wealth?.assets?.vehicleAssets||[],bankAccountAssets:w?.wealth?.assets?.bankAccountAssets||[],cashAsset:w?.wealth?.assets?.cashAsset||{}},deductions:{bankTransactions:w?.deductions?.bankTransactions||[],utilityDeductions:w?.deductions?.utilityDeductions||[],otherDeductions:w?.deductions?.otherDeductions||{}},liabilities:{bankLoans:w?.liabilitiesAndExpenses?.bankLoans||[]},expenses:w?.liabilitiesAndExpenses?.expenses||{},wrapUp:{autoAdjustWealth:!0,termsAccepted:!0},cart:{additionalServices:[]},checkout:{paymentMethod:"bank_transfer",paymentStatus:"pending",billingAddress:s.billingAddress||{}},fbrCredentials:p?{fbrPassword:y,fbrPin:v}:void 0,cnicFiles:g.filter(e=>null!==e)},a=await eU.SP.post("/api/tax-filing/comprehensive/submit",t,{headers:e});a.data.success&&I.push(`/user-services/personal-tax-filing/${a.data.data.taxFiling.id}/confirmation`)}catch(e){P(e.message||"Failed to submit tax filing"),console.error("Error submitting tax filing:",e)}finally{C(!1)}},M=async()=>{m(!1),f(!0)},R=async()=>{m(!1),x(!0)};if(u){let e=g[0]&&g[1];return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[(0,a.jsx)("div",{className:"mt-8 mb-2",children:(0,a.jsx)("span",{className:"inline-block mb-2",children:(0,a.jsxs)("svg",{width:"60",height:"60",fill:"none",viewBox:"0 0 60 60",children:[(0,a.jsx)("rect",{width:"60",height:"60",rx:"12",fill:"#F3F4F6"}),(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:"18",y:"18",width:"24",height:"24",rx:"4",fill:"#fff"}),(0,a.jsx)("rect",{x:"18",y:"18",width:"24",height:"24",rx:"4",stroke:"#E5E7EB",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"25",y:"25",width:"10",height:"10",rx:"2",fill:"#E5E7EB"}),(0,a.jsx)("rect",{x:"25",y:"25",width:"10",height:"10",rx:"2",stroke:"#D1D5DB",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"28",y:"28",width:"4",height:"4",rx:"2",fill:"#D1D5DB"})]}),(0,a.jsx)("rect",{x:"22",y:"10",width:"16",height:"8",rx:"2",fill:"#ef4444"}),(0,a.jsx)("text",{x:"30",y:"18",textAnchor:"middle",fontSize:"8",fontWeight:"bold",fill:"#fff",children:"NTN"})]})})}),(0,a.jsxs)("div",{className:"text-2xl font-semibold text-center mb-2",children:[w?.user?.fullName||"User",", please upload your ",(0,a.jsx)("span",{className:"font-bold",children:"NIC Card"})]}),(0,a.jsx)("div",{className:"text-center text-gray-600 mb-2 text-lg",children:"We have made the simplest process for NTN registration"}),(0,a.jsx)("div",{className:"text-center mb-2",children:(0,a.jsx)("a",{href:"#",className:"text-red-700 font-semibold underline",children:"Already NTN registered?"})}),(0,a.jsxs)("div",{className:"text-center text-gray-700 mb-6",children:["Please upload your CNIC front & back",(0,a.jsx)("br",{}),"and the image must be clear."]}),(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center bg-gray-50 border border-gray-200 rounded-xl px-12 py-6 cursor-pointer shadow mb-8 hover:shadow-lg transition",style:{minWidth:320},children:[(0,a.jsx)("span",{className:"mb-2",children:(0,a.jsxs)("svg",{width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#D1D5DB"}),(0,a.jsx)("path",{d:"M12 8v8M8 12h8",stroke:"#6B7280",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,a.jsx)("span",{className:"text-xl font-semibold text-gray-800",children:"Click Here To Upload"}),(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>{if(e.target.files){let t=Array.from(e.target.files).slice(0,2);b([t[0]||null,t[1]||null])}}}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:[g[0]?g[0].name:"CNIC Front",g[1]?`, ${g[1].name}`:", CNIC Back"]})]}),(0,a.jsxs)("div",{className:"flex justify-between w-full max-w-lg mt-8",children:[(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-blue-500 text-white font-semibold text-lg shadow hover:bg-blue-600 transition",onClick:()=>{x(!1),m(!0)},children:"Back"}),(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-red-600 text-white font-semibold text-lg shadow hover:bg-red-700 transition disabled:opacity-50",onClick:()=>{B()},disabled:!e,children:"Continue"})]})]})}if(p){let e=y&&v;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[(0,a.jsx)("div",{className:"mt-8 mb-2",children:(0,a.jsx)("span",{className:"inline-block mb-2",children:(0,a.jsxs)("svg",{width:"60",height:"60",fill:"none",viewBox:"0 0 60 60",children:[(0,a.jsx)("rect",{width:"60",height:"60",rx:"12",fill:"#F3F4F6"}),(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:"18",y:"18",width:"24",height:"24",rx:"4",fill:"#fff"}),(0,a.jsx)("rect",{x:"18",y:"18",width:"24",height:"24",rx:"4",stroke:"#E5E7EB",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"25",y:"25",width:"10",height:"10",rx:"2",fill:"#E5E7EB"}),(0,a.jsx)("rect",{x:"25",y:"25",width:"10",height:"10",rx:"2",stroke:"#D1D5DB",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"28",y:"28",width:"4",height:"4",rx:"2",fill:"#D1D5DB"})]}),(0,a.jsx)("rect",{x:"22",y:"10",width:"16",height:"8",rx:"2",fill:"#ef4444"}),(0,a.jsx)("text",{x:"30",y:"18",textAnchor:"middle",fontSize:"8",fontWeight:"bold",fill:"#fff",children:"NTN"})]})})}),(0,a.jsxs)("div",{className:"text-2xl font-semibold text-center mb-2",children:["Please enter your ",(0,a.jsx)("span",{className:"font-bold",children:"FBR Credential"})]}),(0,a.jsx)("div",{className:"text-center text-gray-600 mb-2 text-lg",children:"We ensure your information is secure that is why it is encrypted"}),(0,a.jsx)("div",{className:"text-center mb-4",children:(0,a.jsx)("a",{href:"#",className:"text-red-700 font-semibold underline",children:"Register new NTN?"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full max-w-xs mx-auto mb-8",children:[(0,a.jsx)("input",{type:"password",placeholder:"FBR Password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-red-400",value:y,onChange:e=>j(e.target.value)}),(0,a.jsx)("input",{type:"password",placeholder:"FBR PIN",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-red-400",value:v,onChange:e=>N(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-between w-full max-w-lg mt-8",children:[(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-blue-500 text-white font-semibold text-lg shadow hover:bg-blue-600 transition",onClick:()=>{f(!1),m(!0)},children:"Back"}),(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-red-600 text-white font-semibold text-lg shadow hover:bg-red-700 transition disabled:opacity-50",onClick:()=>{eg.A.set("fbrPassword",y,{expires:7,secure:!0}),eg.A.set("fbrPin",v,{expires:7,secure:!0}),B()},disabled:!e,children:"Continue"})]})]})}return h?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[(0,a.jsxs)("div",{className:"text-3xl font-semibold text-center mb-2 mt-8",children:["Already registered a ",(0,a.jsx)("span",{className:"font-bold",children:"NTN"})]}),(0,a.jsxs)("div",{className:"text-center text-gray-600 mb-8 text-lg max-w-xl",children:["NTN is a unique ID issued by Federal board of Revenue (FBR)",(0,a.jsx)("br",{}),"without NTN you cannot file your tax returns"]}),(0,a.jsxs)("div",{className:"flex gap-8 mb-8",children:[(0,a.jsxs)("button",{className:"flex flex-col items-center justify-center px-10 py-6 rounded-lg bg-white border border-gray-200 shadow hover:shadow-lg transition",onClick:M,children:[(0,a.jsx)("span",{className:"rounded-full bg-green-500 text-white p-2 mb-2",children:(0,a.jsxs)("svg",{width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#22c55e"}),(0,a.jsx)("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,a.jsx)("span",{className:"text-xl font-semibold text-green-700",children:"Yes"})]}),(0,a.jsxs)("button",{className:"flex flex-col items-center justify-center px-10 py-6 rounded-lg bg-white border border-gray-200 shadow hover:shadow-lg transition",onClick:R,children:[(0,a.jsx)("span",{className:"rounded-full bg-red-600 text-white p-2 mb-2",children:(0,a.jsxs)("svg",{width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#ef4444"}),(0,a.jsx)("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,a.jsx)("span",{className:"text-xl font-semibold text-red-700",children:"No"})]})]}),(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-blue-500 text-white font-semibold text-lg shadow hover:bg-blue-600 transition",onClick:()=>{m(!1),d(!0)},children:"Back"})]}):o?(0,a.jsxs)("div",{children:[A&&(0,a.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading API data..."})]}),S&&(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,a.jsx)("strong",{children:"Error:"})," ",S]}),(0,a.jsx)(eZ,{formData:s,onBack:()=>{d(!1),c(!0)},onContinue:()=>{d(!1),m(!0)},taxFilingData:w})]}):r?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[(0,a.jsxs)("div",{className:"text-2xl font-semibold text-center mb-2 mt-8",children:["Terms of our ",(0,a.jsx)("span",{className:"font-bold",children:"Engagement"})]}),(0,a.jsx)("div",{className:"text-center text-gray-500 mb-6",children:"Transparency is important to us, and that's why we're asking for your approval"}),(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg p-8 max-w-2xl w-full mx-auto mb-8 text-left shadow",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"GENERAL PAYMENT TERMS"}),(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("b",{children:"Payment Due at Time of Order; Non-Refundable:"}),(0,a.jsx)("br",{}),"You agree to pay all amounts due for Services at the time you order them. All amounts are non-refundable unless otherwise specified in the Refund Policy. You acknowledge and agree that the Site is an online platform enabling you to access our services at any time from any location using a payment method of your choice, at the prices indicated."]}),(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("b",{children:"Refunds Issued:"}),(0,a.jsx)("br",{}),"You agree that Pakfiler's issuance of a refund receipt is only confirmation that Pakfiler has processed your refund via the charged Payment Method. Pakfiler does not control when the refund will be applied to your Payment Method's available balance. You further acknowledge that the payment provider or the issuing bank of your Payment Method determines the timing for posting your refund. Refund processing times may vary from five (5) business days to a full billing cycle, or longer."]}),(0,a.jsx)("p",{className:"mb-2",children:"In cases where a refund is issued to your Payment Method and the payment provider, processor, or issuing bank imposes limitations on refundsincluding, but not limited to, timing or the number of allowable refundsPakfiler reserves the right to issue refunds in the form of: (i) store credit; (ii) a Pakfiler check mailed to the address on file for your Account; or (iii) a bank transfer, if the payment cannot be refunded back to the Payment Method. Pakfiler also reserves the right to offer in-store credit for refunds."}),(0,a.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4",children:"REFUND POLICY"}),(0,a.jsx)("p",{className:"mb-2",children:(0,a.jsx)("b",{children:"Services purchased from Pakfiler.com are refundable only if canceled within the specified refund period below."})}),(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("b",{children:"Date of Transaction:"})," Refers to the date any service was purchased, adhering to the terms and conditions of the specific service."]}),(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("b",{children:"Refund Period:"})," A service may be canceled at any time, but a refund will only be issued if the cancellation is made within the refund period specific to the service and is requested through Pakfiler's customer service."]}),(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("b",{children:"Standard Refund Terms:"}),(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"NTN Registration:"})," Before 48 hours of case submission or completion of e-enrollment / registration of NTN, whichever comes first.",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Tax Filing:"})," Before 48 hours of case submission or filing of the tax return, whichever comes first.",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Other Services:"})," Before 48 hours of case submission or successful completion of the service, whichever comes first."]})]}),(0,a.jsxs)("div",{className:"flex gap-8 mt-4",children:[(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-blue-500 text-white font-semibold text-lg shadow hover:bg-blue-600 transition",onClick:()=>c(!1),children:"Back"}),(0,a.jsx)("button",{className:"px-8 py-2 rounded bg-red-600 text-white font-semibold text-lg shadow hover:bg-red-700 transition",onClick:()=>d(!0),children:"Agree"})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-center mb-2 mt-8",children:"It seems that there's a difference in your wealth reconciliation"}),(0,a.jsxs)("div",{className:"text-4xl font-bold text-red-700 mb-4",children:["Rs. ",isNaN(F)?"0":F.toLocaleString()]}),(0,a.jsxs)("div",{className:"text-center mb-4",children:["Can we auto adjust the difference with your opening wealth to reconcile the"," ",(0,a.jsx)("span",{className:"font-semibold underline",children:"wealth statement"})]}),(0,a.jsxs)("div",{className:"flex gap-6 mt-4",children:[(0,a.jsxs)("button",{className:"flex items-center gap-2 px-6 py-4 rounded-lg bg-green-500 text-white font-semibold text-lg shadow hover:bg-green-600 transition",onClick:()=>{c(!0);let e={...s,wealthStatement:{...s.wealthStatement,assets:{...s.wealthStatement?.assets,cash:{balance:(s.wealthStatement?.assets?.cash?.balance||0)+F}}}};n(e),t("wealthStatement",e.wealthStatement)},children:[(0,a.jsx)("span",{className:"rounded-full bg-white text-green-500 p-1",children:(0,a.jsxs)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#22c55e"}),(0,a.jsx)("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),"Auto Adjust In Opening Wealth"]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-6 py-4 rounded-lg bg-red-600 text-white font-semibold text-lg shadow hover:bg-red-700 transition",onClick:()=>c(!0),children:[(0,a.jsx)("span",{className:"rounded-full bg-white text-red-500 p-1",children:(0,a.jsxs)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#ef4444"}),(0,a.jsx)("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),"I Will Adjust It Myself"]})]})]})}function eQ(){let e=(0,l.useRouter)(),t=(0,l.useParams)(),s=t&&"object"==typeof t&&"id"in t?t.id:"",n=eg.A.get("user")?JSON.parse(eg.A.get("user")):null;s||e.push("/user-services/personal-tax-filing");let[u,p]=(0,i.useState)(1),[f,g]=(0,i.useState)({taxYear:"",fullName:n?.name||"",email:n?.email||"",cnic:n?.cnic||"",dateOfBirth:null,nationality:"Pakistani",residentialStatus:"",stayMoreThan3Years:!1,employmentBasedStay:!1,incomes:[],salaryIncome:"",businessIncome:"",rentalIncome:"",otherIncome:"",deductions:[],deductionDetails:{},selectedAssets:[],wealthStatement:{openingWealth:0,assets:{},liabilities:{}},expense:{householdExpenses:0},taxCredits:{},documentsUploaded:!1,consentGiven:!1,bankDetails:{}}),b=[{id:1,title:"Tax Year",shortTitle:"Year"},{id:2,title:"Personal Info",shortTitle:"Info"},{id:3,title:"Income Sources",shortTitle:"Sources"},{id:4,title:"Income Details",shortTitle:"Details"},{id:5,title:"Tax Credits",shortTitle:"Credits"},{id:6,title:"Deductions",shortTitle:"Deductions"},{id:7,title:"Opening Wealth",shortTitle:"Wealth"},{id:8,title:"Asset Selection",shortTitle:"Assets"},{id:9,title:"Asset Details",shortTitle:"Asset Details"},{id:10,title:"Liabilities",shortTitle:"Liabilities"},{id:11,title:"Expense Details",shortTitle:"Expense"},{id:12,title:"Wrap Up",shortTitle:"Wrap Up"}],y=(e,t)=>{g(s=>({...s,[e]:t}))},j=e=>{switch(e){case 1:return!!f.taxYear;case 2:return!!f.fullName&&!!f.email&&!!f.cnic&&/^\d{5}-\d{7}-\d{1}$/.test(f.cnic)&&!!f.dateOfBirth&&!!f.nationality&&!!f.residentialStatus;case 3:return f.incomes.length>0;case 4:return f.incomes.every(e=>"salary"===e?!!f.salaryIncome:"business"===e?!!f.businessIncome:"rent"===e?!!f.rentalIncome:"other"!==e||!!f.otherIncome);case 5:case 10:case 12:default:return!0;case 6:return 0===f.deductions.length||f.deductions.every(e=>{let t=f.deductionDetails;return"bank_transactions"===e?t.bankTransactions?.length>0:"utilities"===e?t.utilities?.length>0:"vehicles"===e?t.vehicles?.length>0:"other"===e&&Object.values(t.other||{}).some(e=>e>0)});case 7:return f.wealthStatement.openingWealth>=0;case 8:return f.selectedAssets.length>0;case 9:return f.selectedAssets.every(e=>{let t=f.wealthStatement.assets;return"cash"===e?t.cash?.balance>0:t[e]?.length>0});case 11:return!!f.expense}},v=e=>{if(e>=1&&e<=b.length){if(e<=u)p(e);else{for(let t=1;t<e;t++)if(!j(t)){alert(`Please complete Step ${t} before going to Step ${e}`);return}p(e)}}},N=async()=>{if(u===b.length){console.log("Final Submit: Form Data ->",f),e.push(`/user-services/personal-tax-filing/${s}/checkout`);return}p(u+1)};return(0,a.jsxs)("div",{className:"flex flex-row gap-6 px-2 sm:px-4 md:px-8 mx-auto py-8 mt-16 w-full",children:[(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)(eG,{formData:f})}),(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 mb-8",children:[(0,a.jsx)("div",{className:"jsx-f8b472ca13077104 hidden lg:block",children:(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 relative",children:[(0,a.jsx)("div",{className:"jsx-f8b472ca13077104 flex items-center justify-between",children:b.map((e,t)=>(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 flex flex-col items-center relative z-10",children:[(0,a.jsx)("div",{onClick:()=>v(e.id),className:`jsx-f8b472ca13077104 w-10 h-10 flex items-center justify-center rounded-full cursor-pointer transition-all duration-300 ${e.id===u?"bg-[#15803d] text-white border-2 border-[#15803d]":j(e.id)?"bg-green-500 text-white border-2 border-green-500 hover:bg-green-600":"bg-gray-200 text-gray-500 border-2 border-gray-200 hover:bg-gray-300"}`,children:j(e.id)&&e.id!==u?(0,a.jsx)(d.A,{className:"h-5 w-5"}):e.id}),(0,a.jsx)("span",{className:`jsx-f8b472ca13077104 mt-2 text-sm font-medium text-center ${e.id===u?"text-[#15803d]":j(e.id)?"text-green-800":"text-gray-500"}`,children:e.title})]},e.id))}),(0,a.jsx)("div",{className:"jsx-f8b472ca13077104 absolute top-5 left-0 right-0 h-0.5 bg-gray-200 -z-10",children:(0,a.jsx)("div",{style:{width:`${(u-1)/(b.length-1)*100}%`},className:"jsx-f8b472ca13077104 h-full bg-green-500 transition-all duration-300"})})]})}),(0,a.jsx)("div",{className:"jsx-f8b472ca13077104 hidden md:block lg:hidden",children:(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 relative",children:[(0,a.jsx)("div",{className:"jsx-f8b472ca13077104 flex items-center justify-between",children:b.map((e,t)=>(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 flex flex-col items-center relative z-10",children:[(0,a.jsx)("div",{onClick:()=>v(e.id),className:`jsx-f8b472ca13077104 w-8 h-8 flex items-center justify-center rounded-full cursor-pointer transition-all duration-300 text-xs ${e.id===u?"bg-[#15803d] text-white border-2 border-[#15803d]":j(e.id)?"bg-green-500 text-white border-2 border-green-500 hover:bg-green-600":"bg-gray-200 text-gray-500 border-2 border-gray-200 hover:bg-gray-300"}`,children:j(e.id)&&e.id!==u?(0,a.jsx)(d.A,{className:"h-4 w-4"}):e.id}),(0,a.jsx)("span",{className:`jsx-f8b472ca13077104 mt-1 text-xs font-medium text-center ${e.id===u?"text-[#15803d]":j(e.id)?"text-green-800":"text-gray-500"}`,children:e.shortTitle})]},e.id))}),(0,a.jsx)("div",{className:"jsx-f8b472ca13077104 absolute top-4 left-0 right-0 h-0.5 bg-gray-200 -z-10",children:(0,a.jsx)("div",{style:{width:`${(u-1)/(b.length-1)*100}%`},className:"jsx-f8b472ca13077104 h-full bg-green-500 transition-all duration-300"})})]})}),(0,a.jsx)("div",{className:"jsx-f8b472ca13077104 block md:hidden",children:(0,a.jsx)("div",{className:"jsx-f8b472ca13077104 flex items-center gap-4 overflow-x-auto pb-2 scrollbar-hide px-2",children:b.map((e,t)=>(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 flex items-center flex-shrink-0",children:[(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 flex flex-col items-center",children:[(0,a.jsx)("div",{onClick:()=>v(e.id),className:`jsx-f8b472ca13077104 w-8 h-8 flex items-center justify-center rounded-full cursor-pointer transition-all duration-300 text-xs ${e.id===u?"bg-[#15803d] text-white border-2 border-[#15803d]":j(e.id)?"bg-green-500 text-white border-2 border-green-500":"bg-gray-200 text-gray-500 border-2 border-gray-200"}`,children:j(e.id)&&e.id!==u?(0,a.jsx)(d.A,{className:"h-4 w-4"}):e.id}),(0,a.jsx)("span",{className:`jsx-f8b472ca13077104 mt-1 text-xs font-medium text-center whitespace-nowrap ${e.id===u?"text-[#15803d]":j(e.id)?"text-green-800":"text-gray-500"}`,children:e.shortTitle})]}),t<b.length-1&&(0,a.jsx)("div",{className:`jsx-f8b472ca13077104 w-8 h-0.5 mx-2 ${j(e.id)?"bg-green-500":"bg-gray-200"}`})]},e.id))})})]}),(0,a.jsxs)(c.Zp,{className:"w-full p-2 sm:p-4 md:p-8 mx-auto",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{children:["Personal Tax Filing - Step ",u,": ",b[u-1].title]})}),(0,a.jsxs)(c.Wu,{children:[(()=>{switch(u){case 1:return(0,a.jsx)(x,{formData:f,handleInputChange:y});case 2:return(0,a.jsx)(ea,{formData:f,handleInputChange:y,onNavigateNext:async()=>{await N()}});case 3:return(0,a.jsx)(eb,{formData:f,handleInputChange:y,onNavigateNext:async()=>{await N()}});case 4:return(0,a.jsx)(eT,{formData:f,handleInputChange:y});case 5:return(0,a.jsx)(eH,{formData:f,handleInputChange:y,onNavigateNext:()=>p(6)});case 6:return(0,a.jsx)(eE,{formData:f,handleInputChange:y,nextStep:function(){throw Error("Function not implemented.")}});case 7:return(0,a.jsx)(eD,{formData:f,handleInputChange:y});case 8:return(0,a.jsx)(eL,{formData:f,handleInputChange:y});case 9:return(0,a.jsx)(ez,{formData:f,handleInputChange:y});case 10:return(0,a.jsx)(eJ,{formData:f,handleInputChange:y});case 11:return(0,a.jsx)(eK,{formData:f,handleInputChange:y});case 12:return(0,a.jsx)(eX,{formData:f,handleInputChange:y});default:return null}})(),(0,a.jsxs)("div",{className:"jsx-f8b472ca13077104 mt-6 flex justify-between",children:[(0,a.jsxs)(o.$,{variant:"outline",onClick:()=>{u>1&&p(u-1)},disabled:1===u,className:"flex items-center",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,a.jsxs)(o.$,{onClick:N,className:"flex items-center",disabled:u<b.length&&!j(u),children:[u===b.length?"Submit":"Next",u<b.length&&(0,a.jsx)(m.A,{className:"h-4 w-4 ml-2"})]})]})]})]}),(0,a.jsx)(r(),{id:"f8b472ca13077104",children:".scrollbar-hide.jsx-f8b472ca13077104{-ms-overflow-style:none;scrollbar-width:none}.scrollbar-hide.jsx-f8b472ca13077104::-webkit-scrollbar{display:none}"})]})]})}},92997:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>d,routeModule:()=>m,tree:()=>o});var a=s(65239),n=s(48088),r=s(88170),i=s.n(r),l=s(30893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o={children:["",{children:["user-services",{children:["personal-tax-filing",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,82359)),"F:\\Office Data\\My Made Projects\\7- PakFiler\\Pak-Filler\\be-filler\\app\\user-services\\personal-tax-filing\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,70506)),"F:\\Office Data\\My Made Projects\\7- PakFiler\\Pak-Filler\\be-filler\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,82366)),"F:\\Office Data\\My Made Projects\\7- PakFiler\\Pak-Filler\\be-filler\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["F:\\Office Data\\My Made Projects\\7- PakFiler\\Pak-Filler\\be-filler\\app\\user-services\\personal-tax-filing\\[id]\\page.tsx"],h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/user-services/personal-tax-filing/[id]/page",pathname:"/user-services/personal-tax-filing/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},93508:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},94735:e=>{"use strict";e.exports=require("events")},96474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},99891:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4096,4803,7186,1771],()=>s(92997));module.exports=a})();